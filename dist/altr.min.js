(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function(t){function e(o,r,i,n){if(!(this instanceof e))return new e(o,r,i,n);if(this.root=o,this.sync=i,this.batch=N(i),this.document=n||t.document,this.filters=Object.create(this.filters),this.includes=Object.create(this.includes),this.accessors=g(this.filters,!1),t.Buffer&&o instanceof t.Buffer&&(o=o.toString()),"string"==typeof o){var s=this.document.createElement("div");for(s.innerHTML=o,this.root=this.document.createDocumentFragment();s.firstChild;)this.root.appendChild(s.firstChild)}this._update=this.updateNodes(this.rootNodes()),r&&this.update(r)}function o(t){this._update(t),this.sync&&this.batch.run()}function r(t){function e(t){for(var e=0,i=o.length;i>e;++e)o[e].call(r,t)}var o=this.initNodes(t),r=this;return e}function i(t){function e(t,e){return t.concat(e)}var o=[].slice.call(t).map(n.bind(this)).filter(Boolean).reduce(e,[]);return o}function n(t){return _[t.nodeType]?_[t.nodeType].call(this,t):t.childNodes&&t.childNodes.length?this.initNodes(t.childNodes):null}function s(){return 11===this.root.nodeType?[].slice.call(this.root.childNodes):[this.root]}function c(t,o){e.prototype.filters[t]=o}function p(t,o){e.prototype.tags[t]=o,e.prototype.tagList.push({attr:t,constructor:o})}function d(){return this.rootNodes().map(function(t){return t.outerHTML}).join("")}function u(t){for(var e=this.rootNodes(),o=0,r=e.length;r>o;++o)t.appendChild(h(e[o]))}function l(t,e){return this.includes[t]=e}function a(t,e){return this.accessors.create(t,e,!1)}function c(t,e){return this.filters[t]=e}function h(t){for(;t&&t._altr_placeholder;)t=t._altr_placeholder;return t}var f=require("./template_string"),y=require("./element_node"),g=require("altr-accessors"),m=require("./text_node"),N=require("./batch");module.exports=e,e.addTag=p,e.include=l.bind(e.prototype),e.addFilter=c.bind(e.prototype),e.prototype.templateString=f,e.prototype.createAccessor=a,e.prototype.updateNodes=r,e.prototype.addFilter=c,e.prototype.initNodes=i,e.prototype.rootNodes=s,e.prototype.toString=d,e.prototype.include=l,e.prototype.initNode=n,e.prototype.getElement=h,e.prototype.into=u,e.prototype.update=o,e.prototype.includes={},e.prototype.tagList=[],e.prototype.filters={},e.prototype.tags={};var _={};_[1]=y,_[3]=m}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"./batch":2,"./element_node":4,"./template_string":13,"./text_node":14,"altr-accessors":15}],2:[function(require,module,exports){
!function(t){function e(t){return this instanceof e?(this.jobs=[],this.sync=t,this.frame=null,this.run=this.run.bind(this),void 0):new e(t)}function n(t){function e(){s=[].slice.call(arguments),i=this,o||(o=!0,r.queue(n))}function n(){o=!1,t.apply(i,s)}var i,s,o=!1,r=this;return e}function i(t){this.jobs.push(t),this.sync||this.request_frame()}function s(){var t=this.jobs;this.jobs=[],this.frame=null;for(var e=0,n=t.length;n>e;++e)t[e]()}function o(){this.frame||(this.frame=r(this.run))}function r(e){function n(t){return setTimeout(t,1e3/60)}var i=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||n;return i(e)}module.exports=e,e.prototype.request_frame=o,e.prototype.queue=i,e.prototype.add=n,e.prototype.run=s}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{}],3:[function(require,module,exports){
!function(e){module.exports=e.altr=require("./index")}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"./index":5}],4:[function(require,module,exports){
function create_element_node(t){var e,a={},r=this,n=[],i=Array.prototype.filter.call(t.attributes,function(t){return r.tags[t.name]?(a[t.name]=t.value)&&!1:!0});i.forEach(function(e){var a=e.value,i=e.name;i.indexOf("altr-attr-")||(i=e.name.slice("altr-attr-".length),t.removeAttribute(e.name));var o=r.templateString(a,r.batch.add(function(e){t.setAttribute(i,e)}));o&&n.push(o)});for(var o=0,l=r.tagList.length;l>o;++o)if(e=a[r.tagList[o].attr])return n.push(r.tagList[o].constructor.call(r,t,e)),n;return n.concat(r.initNodes(t.childNodes))}module.exports=create_element_node;
},{}],5:[function(require,module,exports){
var placeholder=require("./tags/placeholder"),include_tag=require("./tags/include"),text_tag=require("./tags/text"),html_tag=require("./tags/html"),with_tag=require("./tags/with"),for_tag=require("./tags/for"),if_tag=require("./tags/if"),altr=require("./altr");module.exports=altr,altr.addTag("altr-placeholder",placeholder),altr.addTag("altr-include",include_tag),altr.addTag("altr-text",text_tag),altr.addTag("altr-html",html_tag),altr.addTag("altr-with",with_tag),altr.addTag("altr-for",for_tag),altr.addTag("altr-if",if_tag);
},{"./altr":1,"./tags/for":6,"./tags/html":7,"./tags/if":8,"./tags/include":9,"./tags/placeholder":10,"./tags/text":11,"./tags/with":12}],6:[function(require,module,exports){
function for_handler(e,r){function n(e){for(var r,n=0,t=c.length;t>n;++n)r=Object.create(e),r[v]=u[n],r.$index=n,c[n].update&&c[n].update(r)}function t(e,r){Array.isArray(e)||(e=[]);for(var t,a=new Array(e.length),l=[],s=0,d=e.length;d>s;++s)t=o(u,e[s],h),-1!==t?(a[s]=c.splice(t,1)[0],u.splice(t,1)):a[s]=i(),l=l.concat(a[s].dom_nodes);for(var s=0,d=c.length;d>s;++s)f.push({remove:c[s].dom_nodes});f.push({insert:l}),c=a.slice(),u=e.slice(),p(),n(r)}function o(e,r,n){if(!n)return e.indexOf(r);for(var t=0,o=e.length;o>t;++t)if(e[t][n]===r[n])return t;return-1}function i(){var r,n,t=d.document.createElementNS(e.namespaceURI,"div");return t.innerHTML=s,r=Array.prototype.slice.call(t.childNodes),n=d.updateNodes(r),{dom_nodes:r,update:n}}function a(){for(var r,n=0,t=f.length;t>n;++n){if(r=f[n],r.remove)for(var o=0,i=r.remove.length;i>o;++o)e.removeChild(d.getElement(r.remove[o]));if(r.insert)for(var o=0,i=r.insert.length;i>o;++o)e.insertBefore(d.getElement(r.insert[o]),d.getElement(r.before||null))}f=[]}var l=r.match(for_regexp),s=e.innerHTML,f=[],c=[],d=this,u=[];if(!l)throw new Error("invalid for tag: "+r);e.innerHTML="";var h=l[1].split(":")[1],v=l[1].split(":")[0],m=l[2],p=this.batch.add(a);return d.createAccessor(m,t)}var for_regexp=/^(.*?)\s+in\s+(.*$)/;module.exports=for_handler;
},{}],7:[function(require,module,exports){
function html(t,e){function n(e){t.innerHTML="undefined"==typeof e?"":e,t.getAttribute("altr-run-scripts")&&[].forEach.call(t.getElementsByTagName("script"),run)}return this.batch.add(this.createAccessor(e,n))}function run(t){for(var e=document.createElement("script"),n=t.parentNode,r=t.attributes,i=0,o=r.length;o>i;++i)e.setAttribute(r[i].name,r[i].value);e.textContent=t.textContent,n.insertBefore(e,t),n.removeChild(t)}module.exports=html;
},{}],8:[function(require,module,exports){
function if_tag(e,t){function a(e,t){return e?(o(),r(t),void 0):c()}var d=this.document.createComment("altr-if-placeholder"),r=this.updateNodes(e.childNodes),l=null,c=this.batch.add(function(){l||(e.parentNode.replaceChild(d,e),e._altr_placeholder=d,l=!0)}),o=this.batch.add(function(){l&&(d.parentNode.replaceChild(e,d),delete e._altr_placeholder,l=!1)});return this.createAccessor(t,a)}module.exports=if_tag;
},{}],9:[function(require,module,exports){
function include(e,d){return e.innerHTML=this.includes[d],this.updateNodes(e.childNodes)}module.exports=include;
},{}],10:[function(require,module,exports){
function placeholder(e,r){function o(r){r.nodeName&&(t.insertBefore(r,e),t.removeChild(e),e._altr_placeholder=r,e=r)}var t=e.parentNode;return this.batch.add(this.createAccessor(r,o))}module.exports=placeholder;
},{}],11:[function(require,module,exports){
function text(t,e){function n(e){t.textContent="undefined"==typeof e?"":e}return this.batch.add(this.createAccessor(e,n))}module.exports=text;
},{}],12:[function(require,module,exports){
function with_tag(t,e){return this.createAccessor(e,this.updateNodes(t.childNodes))}module.exports=with_tag;
},{}],13:[function(require,module,exports){
function template_string(t,n){function e(t,e){r[t]=e,n(r.join(""))}function s(t){o.forEach(function(n){n(t)})}if(t.match(TAG)){for(var i,c,h=t,r=[],o=[];h&&(c=h.match(TAG));)(i=h.indexOf(c[0]))&&r.push(h.slice(0,i)),r.push(""),h=h.slice(i+c[0].length),o.push(this.createAccessor(c[1],e.bind(this,r.length-1)));return r.push(h),s}}var TAG=/{{\s*(.*?)\s*}}/;module.exports=template_string;
},{}],14:[function(require,module,exports){
function create_text_node(t){function e(e){t.textContent=e}var n=this.templateString(t.textContent,this.batch.add(e));return n?[n]:null}module.exports=create_text_node;
},{}],15:[function(require,module,exports){
function accessors(e,r){return this instanceof accessors?(r||r===!1||(r=0),this.delay=r,this.filters=e||{},void 0):new accessors(e,r)}function add_filter(e,r){this.filters[e]=r}function create(e,r,t){function s(e){p=!0,o=null,i(e),p=!1,o&&r.apply(null,o)}function a(e){(t||"object"==typeof e||e!==c)&&(o=[].slice.call(arguments),c=e,p||r.apply(null,o))}var o,i=this.create_part(e,this.delay===!1?a:debounce(r,this.delay,!1,!0)),p=!1,c={};return s}var add_operators=require("./lib/operators"),create_accesor=require("./lib/create"),add_lookup=require("./lib/lookup"),add_filter=require("./lib/filter"),add_parens=require("./lib/parens"),debounce=require("just-debounce"),add_types=require("./lib/types"),add_arrow=require("./lib/arrow"),split=require("./lib/split"),types=[];module.exports=accessors,add_types(types),add_arrow(types),add_filter(types),add_parens(types),add_operators(types),add_lookup(types),accessors.prototype.create_part=create_accesor,accessors.prototype.add_filter=add_filter,accessors.prototype.create=create,accessors.prototype.types=types,accessors.prototype.split=split;
},{"./lib/arrow":16,"./lib/create":17,"./lib/filter":18,"./lib/lookup":19,"./lib/operators":20,"./lib/parens":21,"./lib/split":22,"./lib/types":23,"just-debounce":24}],16:[function(require,module,exports){
function add_arrow(r){r.push(create_arrow)}function create_arrow(r,t){function a(r,t){e(r,t)}if(r=this.split(r,"->"),!(r.length<2)){var e=this.create_part(r[1],t),o=this.create_part(r[0],a);return o}}module.exports=add_arrow;
},{}],17:[function(require,module,exports){
function accessor(t,i){function s(t,i){c(t,r=i||t)}function n(t){i.call(this,t,r)}var r,c=build_part.call(this,t,n);return s.bind(this)}function build_part(t,i){for(var s,n=0,r=this.types.length;r>n;++n)if(s=this.types[n].call(this,t,i))return s}module.exports=accessor;
},{}],18:[function(require,module,exports){
function add_filter(r){r.push(create_filter)}function create_filter(r,t){if(r=r.match(filter_regexp)){var e=this.filters[r[1]];if(!e)throw new Error("could not find filter: "+r[1]);return e.call(this,this.split(r[2],",",null,null,!0),t)}}var filter_regexp=/^\s*([^\s(]+)\((.*)\)\s*$/;module.exports=add_filter;
},{}],19:[function(require,module,exports){
function add_lookup(o){o.push(create_lookup)}function create_lookup(o,t){return o.indexOf("$data")||(o=o.slice("$data.".length))?lookup(o.match(/\s*(.*[^\s])\s*/)[1],t):t}function lookup(o,t){var e=o?o.split("."):[];return function n(o,u){for(var r=0,a=e.length;o&&a>r;++r)o=o[e[r]];return"undefined"==typeof o&&u?n(u):r===a?t(o):(t(),void 0)}}module.exports=add_lookup;
},{}],20:[function(require,module,exports){
function add_operators(r){r.push(create_ternary),r.push(binary(["|\\|"])),r.push(binary(["&&"])),r.push(binary(["|"])),r.push(binary(["^"])),r.push(binary(["&"])),r.push(binary(["===","!==","==","!="])),r.push(binary([">=","<=",">","<"," in "," instanceof "])),r.push(binary(["+","-"])),r.push(binary(["*","/","%"])),r.push(unary(["!","+","-","~"]))}function binary(r){var n=new RegExp("^\\s*(.+?)\\s*(\\"+r.join("|\\")+")\\s*(.+?)\\s*$");return function(r,t){return create_binary.call(this,n,r,t)}}function unary(r){var n=new RegExp("^\\s*(\\"+r.join("|\\")+")\\s*(.+?)\\s*$");return function(r,t){return create_unary.call(this,n,r,t)}}function create_ternary(r,n){function t(r,n){return r?u(n):i(n)}if(r=r.match(ternary_regexp)){var a=r[1],e=r[2];if(e=this.split(e,":",["?"],[":"]),2!==e.length)throw new Error("Unmatched ternary: "+r[0]);var i=this.create_part(e[1],n),u=this.create_part(e[0],n);return this.create_part(a,t)}}function create_binary(r,n,t){function a(r,n){s(r,n),c(r,n)}function e(r,n){r?u=n:i=n,h(i,u)}if(n=n.match(r)){var i,u,s=this.create_part(n[1],e.bind(null,!1)),c=this.create_part(n[3],e.bind(null,!0)),h=Function("change, lhs, rhs","return change(lhs "+n[2]+" rhs)").bind(null,t);return a}}function create_unary(r,n,t){if(n=n.match(r)){var a=Function("change, val","return change("+n[1]+"val)").bind(null,t);return this.create_part(n[2],a)}}var ternary_regexp=/^\s*(.+?)\s*\?(.*)\s*$/;module.exports=add_operators;
},{}],21:[function(require,module,exports){
function add_parens(e){e.push(create_parens)}function create_parens(e,r){function a(e,r){r=Object.create(r),r[i]=e,o(r)}if(e=e.match(parens_regexp)){for(var t=e[1],n=1,c=0,s=t.length;s>c&&(")"===t[c]?--n:"("===t[c]&&++n,n);++c);if(!c||c===s)throw new Error("Unmatched ternary: "+e[0]);var p=this.create_part(t.slice(0,c),a),i="paren_"+Math.random().toString(16).slice(2),o=this.create_part(i+t.slice(c+1),r);return p}}var parens_regexp=/^\s*\((.*)$/;module.exports=add_parens;
},{}],22:[function(require,module,exports){
function split(n,r,e,t,i){var c,f,l=[")","}","]"],o=["(","{","["],a=0;e&&(o=o.concat(e)),t&&(l=l.concat(t));for(var s=o.map(function(){return 0}),u=0,h=n.length;h>u;++u){if(!a&&-1===(c=n.slice(u).indexOf(r)))return[n];if(!a&&!c)break;-1!==(f=o.indexOf(n[u]))?(++s[f],++a):-1!==(f=l.indexOf(n[u]))&&(--s[f],--a);for(var d=0;d<s.length;++d)if(s[d]<0)throw new Error('Unmatched "'+o[d]+'"" in '+n)}if(a||u===n.length)return[n];var p=n.slice(u+r.length),g=n.slice(0,u);return i?[g].concat(split(p,r,e,t,i)):[g,p]}module.exports=split;
},{}],23:[function(require,module,exports){
function add_types(e){e.push(create_string_accessor),e.push(create_number_accessor)}function create_string_accessor(e,r){return(e=e.match(string_regexp))?function(){r(e[1]||e[2])}:void 0}function create_number_accessor(e,r){return(e=e.match(number_regexp))?function(){r(+e[1])}:void 0}var string_regexp=/^\s*(?:'((?:[^'\\]|(?:\\.))*)'|"((?:[^"\\]|(?:\\.))*)")\s*$/,number_regexp=/^\s*(\d*(?:\.\d+)?)\s*$/;module.exports=add_types;
},{}],24:[function(require,module,exports){
function debounce(e,t,n,u){var o,r;return function(){function i(){c(),e.apply(l,r)}function c(){clearTimeout(o),o=null}var l=this;if(r=Array.prototype.slice.call(arguments),!o||!n&&!u){if(!n)return c(),o=setTimeout(i,t);o=setTimeout(c,t),e.apply(l,r)}}}module.exports=debounce;
},{}]},{},[3])


//# sourceMappingURL=altr.min.map