(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function(t){function e(o,i,r,n){if(!(this instanceof e))return new e(o,i,r,n);if(this.root=o,this.sync=r,this.batch=_(r),this.document=n||t.document,this.filters=Object.create(this.filters),this.includes=Object.create(this.includes),this.accessors=f(this.filters,!1),t.Buffer&&o instanceof t.Buffer&&(o=o.toString()),"string"==typeof o){var s=this.document.createElement("div");for(s.innerHTML=o,this.root=this.document.createDocumentFragment();s.firstChild;)this.root.appendChild(s.firstChild)}this.root_nodes=11===this.root.nodeType?[].slice.call(this.root.childNodes):[this.root],this.tree=this.create_node({childNodes:this.root_nodes}),i&&this.update(i)}function o(t,e){e=e||this.tree,e.hooks&&e.hooks.forEach(function(e){e(t)}),e.update_children&&e.update_children(t)}function i(t){for(var e=0,i=this.children.length;i>e;++e)o(t,this.children[e])}function r(t){return g[t.nodeType]?g[t.nodeType].call(this,t):d.call(this,t)}function n(t,o){e.prototype.filters[t]=o}function s(t,o){e.prototype.tags[t]=o,e.prototype.tag_list.push({attr:t,constructor:o})}function c(){return this.root.outerHTML}function d(t){function e(){return[].map.call(t.childNodes||[],this.create_node.bind(this)).filter(Boolean)}return{el:t,update_children:this.update_children,hooks:[],children:e.call(this)}}function h(t){for(var e=0,o=this.root_nodes.length;o>e;++e)t.appendChild(this.root_nodes[e])}function p(t,e){return this.includes[t]=e}function l(t,e){return this.accessors.create(t,e,!1)}function n(t,e){return this.filters[t]=e}var u=require("./template_string"),a=require("./element_node"),f=require("altr-accessors"),y=require("./text_node"),_=require("./batch");module.exports=e,e.add_tag=s,e.include=p.bind(e.prototype),e.add_filter=n.bind(e.prototype),e.prototype.template_string=u,e.prototype.create_accessor=l,e.prototype.update_children=i,e.prototype.create_node=r,e.prototype.add_filter=n,e.prototype.toString=c,e.prototype.include=p,e.prototype.into=h,e.prototype.update=o,e.prototype.includes={},e.prototype.tag_list=[],e.prototype.filters={},e.prototype.tags={};var g={};g[1]=a,g[3]=y}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"./batch":2,"./element_node":4,"./template_string":13,"./text_node":14,"altr-accessors":15}],2:[function(require,module,exports){
!function(t){function n(t){return this instanceof n?(this.jobs=[],this.sync=t,this.frame=null,this.run=this.run.bind(this),void 0):new n(t)}function i(t){function n(){t.apply(i,e)}var i,e,s=this.jobs.length,o=this;return o.jobs[s]=null,function(){return i=this,e=Array.prototype.slice.call(arguments),o.sync?t.apply(i,e):(o.jobs[s]=n,o.request_frame(),void 0)}}function e(){this.frame=null;for(var t=0,n=this.jobs.length;n>t;++t)this.jobs[t]&&this.jobs[t](),this.jobs[t]=null}function s(){return this.frame?void 0:t.requestAnimationFrame?(this.frame=requestAnimationFrame(this.run),void 0):this.frame=setTimeout(this.run,0)}module.exports=n,n.prototype.request_frame=s,n.prototype.add=i,n.prototype.run=e}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{}],3:[function(require,module,exports){
!function(e){module.exports=e.altr=require("./index")}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"./index":6}],4:[function(require,module,exports){
function create_element_node(t){var e,a={},r=this,l={el:t,update_children:this.update_children,hooks:[]},n=Array.prototype.filter.call(t.attributes,function(t){return r.tags[t.name]?(a[t.name]=t.value)&&!1:!0});n.forEach(function(e){var a=r.template_string(e.value,function(a){t.setAttribute(e.name,a)});a&&l.hooks.push(r.batch.add(a))});for(var o=0,i=r.tag_list.length;i>o;++o)e=a[r.tag_list[o].attr],e&&r.tag_list[o].constructor.call(r,l,e);return l.children=[].map.call(Array.prototype.slice.call(t.childNodes),r.create_node.bind(r)).filter(Boolean),l.children.length||l.hooks.length?l:void 0}module.exports=create_element_node;
},{}],5:[function(require,module,exports){
module.exports=function(n,t){var c,e,o=this.create_accessor(n,function(n){t((e=+n)+(c||0))});return function(n,t){c=+n,o(t)}};
},{}],6:[function(require,module,exports){
var include_tag=require("./tags/include"),add_filter=require("./filters/add"),text_tag=require("./tags/text"),html_tag=require("./tags/html"),with_tag=require("./tags/with"),for_tag=require("./tags/for"),if_tag=require("./tags/if"),altr=require("./altr");module.exports=altr,altr.add_tag("altr-include",include_tag),altr.add_tag("altr-text",text_tag),altr.add_tag("altr-html",html_tag),altr.add_tag("altr-with",with_tag),altr.add_tag("altr-for",for_tag),altr.add_tag("altr-if",if_tag),altr.add_filter("add",add_filter);
},{"./altr":1,"./filters/add":5,"./tags/for":7,"./tags/html":8,"./tags/if":9,"./tags/include":10,"./tags/text":11,"./tags/with":12}],7:[function(require,module,exports){
function for_handler(e,n){function r(n){function r(n){for(var r=0,o=n.length;o>r;++r)e.el.insertBefore(n[r],c)}Array.isArray(n)||(n=[]);var l,t,a=new Array(n.length),c=e.el.firstChild,s=0;e.children=[];for(var h=0,f=n.length;f>h;++h)l=i.indexOf(n[h]),-1!==l?(a[h]=d.splice(l,1)[0],i.splice(l,1),l+s!==h&&r(a[h].dom_nodes),++s):(a[h]=o(),r(a[h].dom_nodes),++s),t=a[h].dom_nodes,c=t.length?t[t.length-1].nextSibling:null,t=t.concat(a[h].dom_nodes),e.children=e.children.concat(a[h].altr_nodes);for(var h=0,f=d.length;f>h;++h)d[h].dom_nodes.forEach(function(e){e.parentNode.removeChild(e)});d=a.slice(),i=n.slice()}function o(){var n,r,o=a.document.createElementNS(e.el.namespaceURI,"div");return o.innerHTML=t,r=Array.prototype.slice.call(o.childNodes),n=r.map(a.create_node.bind(a)).filter(Boolean),{dom_nodes:r,altr_nodes:n}}var l=n.match(for_regexp),t=e.el.innerHTML,d=[],a=this,i=[];if(!l)throw new Error("invalid for tag: "+n);e.el.innerHTML="";var c=l[1],s=l[2];e.hooks.push(a.create_accessor(s,a.batch.add(r))),e.update_children=function(n){for(var r,o=0,l=e.children.length;l>o;++o)r=Object.create(n),r[c]=n[s][o],r.$index=o,a.update(r,e.children[o])}}var for_regexp=/^(.*?)\s+in\s+(.*$)/;module.exports=for_handler;
},{}],8:[function(require,module,exports){
function html(e,t){function n(t){e.el.innerHTML="undefined"==typeof t?"":t}e.hooks.push(this.batch.add(this.create_accessor(t,n)))}module.exports=html;
},{}],9:[function(require,module,exports){
function if_tag(e,n){function t(){c||(c=e.children||[],e.children=[],r.removeChild(e.el))}function i(){c&&(r.insertBefore(e.el,o),e.children=c,c=null)}function l(e){e?i():t()}var o=this.document.createComment("altr-if-placeholder"),r=e.el.parentNode,c=null;r.insertBefore(o,e.el.nextSibling),e.hooks.push(this.batch.add(this.create_accessor(n,l)))}module.exports=if_tag;
},{}],10:[function(require,module,exports){
function include(e,n){e.el.innerHTML=this.includes[n]}module.exports=include;
},{}],11:[function(require,module,exports){
function text(t,e){function o(e){t.el.textContent="undefined"==typeof e?"":e}t.hooks.push(this.batch.add(this.create_accessor(e,o)))}module.exports=text;
},{}],12:[function(require,module,exports){
function with_tag(t,e){t.update_children=this.create_accessor(e,t.update_children.bind(t))}module.exports=with_tag;
},{}],13:[function(require,module,exports){
function template_string(t,n){function e(t,e){r[t]=e,n(r.join(""))}function s(t){o.forEach(function(n){n(t)})}if(t.match(TAG)){for(var i,c,h=t,r=[],o=[];h&&(c=h.match(TAG));)(i=h.indexOf(c[0]))&&r.push(h.slice(0,i)),r.push(""),h=h.slice(i+c[0].length),o.push(this.create_accessor(c[1],e.bind(this,r.length-1)));return r.push(h),s}}var TAG=/{{\s*(.*?)\s*}}/;module.exports=template_string;
},{}],14:[function(require,module,exports){
function create_text_node(t){function e(e){t.textContent=e}var n=this.template_string(t.textContent,e);if(n)return n=this.batch.add(n),{el:t,text:t.textContent,hooks:[n]}}module.exports=create_text_node;
},{}],15:[function(require,module,exports){
function accessors(e,r){return this instanceof accessors?(r||r===!1||(r=0),this.delay=r,this.filters=e||{},void 0):new accessors(e,r)}function add_filter(e,r){this.filters[e]=r}function create(e,r){return this.create_part(e,this.delay===!1?r:debounce(r,this.delay,!1,!0))}var add_operators=require("./lib/operators"),create_accesor=require("./lib/create"),add_lookup=require("./lib/lookup"),add_filter=require("./lib/filter"),add_parens=require("./lib/parens"),debounce=require("just-debounce"),add_types=require("./lib/types"),add_arrow=require("./lib/arrow"),types=[];module.exports=accessors,add_types(types),add_arrow(types),add_filter(types),add_parens(types),add_operators(types),add_lookup(types),accessors.prototype.create_part=create_accesor,accessors.prototype.add_filter=add_filter,accessors.prototype.create=create,accessors.prototype.types=types;
},{"./lib/arrow":16,"./lib/create":17,"./lib/filter":18,"./lib/lookup":19,"./lib/operators":20,"./lib/parens":21,"./lib/types":22,"just-debounce":23}],16:[function(require,module,exports){
function add_arrow(r){r.push(create_arrow)}function create_arrow(r,e){function a(r,e){o(r,e)}for(var t,i=0,n=0,c=r.length;c>n;++n){if(t=r.slice(n).indexOf("->"),"("===r[n]?++i:")"===r[n]?--i:null,0>i||0>t)return;if(!i&&!t)break}if(!i){var o=this.create_part(r.slice(n+2),e),f=this.create_part(r.slice(0,n),a);return f}}module.exports=add_arrow;
},{}],17:[function(require,module,exports){
function accessor(t,i){function s(t,i){l(t,r=i||t)}function n(t){t!==c&&(c=t,i.call(this,t,r))}var r,c,l=build_part.call(this,t,n);return s.bind(this)}function build_part(t,i){for(var s,n=0,r=this.types.length;r>n;++n)if(s=this.types[n].call(this,t,i))return s}module.exports=accessor;
},{}],18:[function(require,module,exports){
function add_filter(r){r.push(create_filter)}function create_filter(r,e){if(r=r.match(filter_regexp)){var t=this.filters[r[1]];if(!t)throw new Error("could not find filter: "+r[1]);return t.call(this,r[2],e)}}var filter_regexp=/^\s*([^\s(]+)\((.*)\)\s*$/;module.exports=add_filter;
},{}],19:[function(require,module,exports){
function add_lookup(o){o.push(create_lookup)}function create_lookup(o,t){return o.indexOf("$data")||(o=o.slice("$data.".length)),lookup(o.match(/\s*(.*[^\s])\s*/)[1],t)}function lookup(o,t){var e=o?o.split("."):[];return function n(o,u){for(var r=0,a=e.length;o&&a>r;++r)o=o[e[r]];return"undefined"==typeof o&&u?n(u):r===a?t(o):(t(),void 0)}}module.exports=add_lookup;
},{}],20:[function(require,module,exports){
function add_operators(r){r.push(create_ternary),r.push(binary(["|\\|"])),r.push(binary(["&&"])),r.push(binary(["|"])),r.push(binary(["^"])),r.push(binary(["&"])),r.push(binary(["===","!==","==","!="])),r.push(binary([">=","<=",">","<"," in "," instanceof "])),r.push(binary(["+","-"])),r.push(binary(["*","/","%"])),r.push(unary(["!","+","-","~"]))}function binary(r){var n=new RegExp("^\\s*(.+?)\\s*(\\"+r.join("|\\")+")\\s*(.+?)\\s*$");return function(r,t){return create_binary.call(this,n,r,t)}}function unary(r){var n=new RegExp("^\\s*(\\"+r.join("|\\")+")\\s*(.+?)\\s*$");return function(r,t){return create_unary.call(this,n,r,t)}}function create_ternary(r,n){function t(r,n){return r?h(n):c(n)}if(r=r.match(ternary_regexp)){for(var a=r[1],e=r[2],i=1,u=0,s=e.length;s>u&&(":"===e[u]?--i:"?"===e[u]&&++i,i);++u);if(!u||u===e.length)throw new Error("Unmatched ternary: "+r[0]);var c=this.create_part(e.slice(u+1),n),h=this.create_part(e.slice(0,u),n);return this.create_part(a,t)}}function create_binary(r,n,t){function a(r,n){s(r,n),c(r,n)}function e(r,n){r?u=n:i=n,h(i,u)}if(n=n.match(r)){var i,u,s=this.create_part(n[1],e.bind(null,!1)),c=this.create_part(n[3],e.bind(null,!0)),h=Function("change, lhs, rhs","return change(lhs "+n[2]+" rhs)").bind(null,t);return a}}function create_unary(r,n,t){if(n=n.match(r)){var a=Function("change, val","return change("+n[1]+"val)").bind(null,t);return this.create_part(n[2],a)}}var ternary_regexp=/^\s*(.+?)\s*\?(.*)\s*$/;module.exports=add_operators;
},{}],21:[function(require,module,exports){
function add_parens(e){e.push(create_parens)}function create_parens(e,r){function a(e,r){r=Object.create(r),r[i]=e,o(r)}if(e=e.match(parens_regexp)){for(var t=e[1],n=1,c=0,s=t.length;s>c&&(")"===t[c]?--n:"("===t[c]&&++n,n);++c);if(!c||c===s)throw new Error("Unmatched ternary: "+e[0]);var p=this.create_part(t.slice(0,c),a),i="paren_"+Math.random().toString(16).slice(2),o=this.create_part(i+t.slice(c+1),r);return p}}var parens_regexp=/^\s*\((.*)$/;module.exports=add_parens;
},{}],22:[function(require,module,exports){
function add_types(e){e.push(create_string_accessor),e.push(create_number_accessor)}function create_string_accessor(e,r){return(e=e.match(string_regexp))?function(){r(e[1]||e[2])}:void 0}function create_number_accessor(e,r){return(e=e.match(number_regexp))?function(){r(+e[1])}:void 0}var string_regexp=/^\s*(?:'((?:[^'\\]|(?:\\.))*)'|"((?:[^"\\]|(?:\\.))*)")\s*$/,number_regexp=/^\s*(\d*(?:\.\d+)?)\s*$/;module.exports=add_types;
},{}],23:[function(require,module,exports){
function debounce(e,t,n,u){var o,r;return function(){function i(){c(),e.apply(l,r)}function c(){clearTimeout(o),o=null}var l=this;if(r=Array.prototype.slice.call(arguments),!o||!n&&!u){if(!n)return c(),o=setTimeout(i,t);o=setTimeout(c,t),e.apply(l,r)}}}module.exports=debounce;
},{}]},{},[3])


//# sourceMappingURL=altr.min.map