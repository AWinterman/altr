(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function(t){function e(o,i,r,n){if(!(this instanceof e))return new e(o,i,r,n);if(this.root=o,this.document=n||t.document,this.filters=Object.create(this.filters),this.includes=Object.create(this.includes),this.debounce=r===!1?!1:r||0,this.accessors=f(this.filters,r),t.Buffer&&o instanceof t.Buffer&&(o=o.toString()),"string"==typeof o){var s=this.document.createElement("div");for(s.innerHTML=o,this.root=this.document.createDocumentFragment();s.firstChild;)this.root.appendChild(s.firstChild)}this.root_nodes=11===this.root.nodeType?[].slice.call(this.root.childNodes):[this.root],this.tree=this.create_node({childNodes:this.root_nodes}),i&&this.update(i)}function o(t,e){e=e||this.tree,e.hooks&&e.hooks.forEach(function(e){e(t)}),e.update_children&&e.update_children(t)}function i(t){for(var e=0,i=this.children.length;i>e;++e)o(t,this.children[e])}function r(t){return _[t.nodeType]?_[t.nodeType].call(this,t):d.call(this,t)}function n(t,o){e.prototype.filters[t]=o}function s(t,o){e.prototype.tags[t]=o,e.prototype.tag_list.push({attr:t,constructor:o})}function c(){return this.root.outerHTML}function d(t){function e(){return[].map.call(t.childNodes||[],this.create_node.bind(this)).filter(Boolean)}return{el:t,update_children:this.update_children,hooks:[],children:e.call(this)}}function h(t){for(var e=0,o=this.root_nodes.length;o>e;++e)t.appendChild(this.root_nodes[e])}function p(t,e){return this.includes[t]=e}function l(t,e){return this.accessors.create(t,e,this.debounce)}function n(t,e){return this.filters[t]=e}var u=require("./template_string"),a=require("./element_node"),f=require("altr-accessors"),y=require("./text_node");module.exports=e,e.add_tag=s,e.include=p.bind(e.prototype),e.add_filter=n.bind(e.prototype),e.prototype.template_string=u,e.prototype.create_accessor=l,e.prototype.update_children=i,e.prototype.create_node=r,e.prototype.add_filter=n,e.prototype.toString=c,e.prototype.include=p,e.prototype.into=h,e.prototype.update=o,e.prototype.includes={},e.prototype.tag_list=[],e.prototype.filters={},e.prototype.tags={};var _={};_[1]=a,_[3]=y}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"./element_node":3,"./template_string":12,"./text_node":13,"altr-accessors":14}],2:[function(require,module,exports){
!function(e){module.exports=e.altr=require("./index")}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"./index":5}],3:[function(require,module,exports){
function create_element_node(e){var t,n={},r=this,a={el:e,update_children:this.update_children,hooks:[]},l=Array.prototype.filter.call(e.attributes,function(e){return r.tags[e.name]?(n[e.name]=e.value)&&!1:!0});l.forEach(function(t){var n=r.template_string(t.value,function(n){e.setAttribute(t.name,n)});n&&a.hooks.push(n)});for(var o=0,i=r.tag_list.length;i>o;++o)t=n[r.tag_list[o].attr],t&&r.tag_list[o].constructor.call(r,a,t);return a.children=[].map.call(e.childNodes,r.create_node.bind(r)).filter(Boolean),a.children.length||a.hooks.length?a:void 0}module.exports=create_element_node;
},{}],4:[function(require,module,exports){
module.exports=function(n,t){var c,e,o=this.create_accessor(n,function(n){t((e=+n)+(c||0))});return function(n,t){c=+n,o(t)}};
},{}],5:[function(require,module,exports){
var include_tag=require("./tags/include"),add_filter=require("./filters/add"),text_tag=require("./tags/text"),html_tag=require("./tags/html"),with_tag=require("./tags/with"),for_tag=require("./tags/for"),if_tag=require("./tags/if"),altr=require("./altr");module.exports=altr,altr.add_tag("altr-include",include_tag),altr.add_tag("altr-text",text_tag),altr.add_tag("altr-html",html_tag),altr.add_tag("altr-with",with_tag),altr.add_tag("altr-for",for_tag),altr.add_tag("altr-if",if_tag),altr.add_filter("add",add_filter);
},{"./altr":1,"./filters/add":4,"./tags/for":6,"./tags/html":7,"./tags/if":8,"./tags/include":9,"./tags/text":10,"./tags/with":11}],6:[function(require,module,exports){
function for_handler(e,n){function r(n){function r(n){for(var r=0,o=n.length;o>r;++r)e.el.insertBefore(n[r],c)}Array.isArray(n)||(n=[]);var l,t,d=new Array(n.length),c=e.el.firstChild,s=0;e.children=[];for(var h=0,f=n.length;f>h;++h)l=a.indexOf(n[h]),-1!==l?(d[h]=i.splice(l,1)[0],a.splice(l,1),l+s!==h&&r(d[h].dom_nodes),++s):(d[h]=o(),r(d[h].dom_nodes),++s),t=d[h].dom_nodes,c=t.length?t[t.length-1].nextSibling:null,t=t.concat(d[h].dom_nodes),e.children=e.children.concat(d[h].altr_nodes);for(var h=0,f=i.length;f>h;++h)i[h].dom_nodes.forEach(function(e){e.parentNode.removeChild(e)});i=d.slice(),a=n.slice()}function o(){var n,r,o=d.document.createElementNS(e.el.namespaceURI,"div");return o.innerHTML=t,r=Array.prototype.slice.call(o.childNodes),n=r.map(d.create_node.bind(d)).filter(Boolean),{dom_nodes:r,altr_nodes:n}}var l=n.match(for_regexp),t=e.el.innerHTML,i=[],d=this,a=[];if(!l)throw new Error("invalid for tag: "+n);e.el.innerHTML="";var c=l[1],s=l[2];e.hooks.push(d.create_accessor(s,r)),e.update_children=function(n){for(var r,o=0,l=e.children.length;l>o;++o)r=Object.create(n),r[c]=n[s][o],r.$index=o,d.update(r,e.children[o])}}var for_regexp=/^(.*?)\s+in\s+(.*$)/;module.exports=for_handler;
},{}],7:[function(require,module,exports){
function html(e,n){function o(n){e.el.innerHTML="undefined"==typeof n?"":n}e.hooks.push(this.create_accessor(n,o))}module.exports=html;
},{}],8:[function(require,module,exports){
function if_tag(e,n){function t(){c||(c=e.children||[],e.children=[],r.removeChild(e.el))}function i(){c&&(r.insertBefore(e.el,o),e.children=c,c=null)}function l(e){e?i():t()}var o=this.document.createComment("altr-if-placeholder"),r=e.el.parentNode,c=null;r.insertBefore(o,e.el.nextSibling),e.hooks.push(this.create_accessor(n,l))}module.exports=if_tag;
},{}],9:[function(require,module,exports){
function include(e,n){e.el.innerHTML=this.includes[n]}module.exports=include;
},{}],10:[function(require,module,exports){
function text(t,e){function o(e){t.el.textContent="undefined"==typeof e?"":e}t.hooks.push(this.create_accessor(e,o))}module.exports=text;
},{}],11:[function(require,module,exports){
function with_tag(t,e){t.update_children=this.create_accessor(e,t.update_children.bind(t))}module.exports=with_tag;
},{}],12:[function(require,module,exports){
function template_string(t,e){function n(t,n){return r[t]=n,this.debounce===!1?e(r.join("")):(clearTimeout(o),o=setTimeout(function(){e(r.join(""))},this.debounce),void 0)}function i(t){h.forEach(function(e){e(t)})}if(t.match(TAG)){for(var o,s,c,u=t,r=[],h=[];u&&(c=u.match(TAG));)(s=u.indexOf(c[0]))&&r.push(u.slice(0,s)),r.push(""),u=u.slice(s+c[0].length),h.push(this.create_accessor(c[1],n.bind(this,r.length-1)));return i}}var TAG=/{{\s*(.*?)\s*}}/;module.exports=template_string;
},{}],13:[function(require,module,exports){
function create_text_node(t){function e(e){t.textContent=e}var n=this.template_string(t.textContent,e);if(n)return{el:t,text:t.textContent,hooks:[n]}}module.exports=create_text_node;
},{}],14:[function(require,module,exports){
function accessors(e,r){return this instanceof accessors?(r||r===!1||(r=0),this.delay=r,this.filters=e||{},void 0):new accessors(e,r)}function add_filter(e,r){this.filters[e]=r}function create(e,r){return this.create_part(e,this.delay===!1?r:debounce(r,this.delay))}var add_operators=require("./lib/operators"),create_accesor=require("./lib/create"),add_lookup=require("./lib/lookup"),add_filter=require("./lib/filter"),add_parens=require("./lib/parens"),debounce=require("just-debounce"),add_types=require("./lib/types"),types=[];module.exports=accessors,add_parens(types),add_types(types),add_operators(types),add_filter(types),add_lookup(types),accessors.prototype.create_part=create_accesor,accessors.prototype.add_filter=add_filter,accessors.prototype.create=create,accessors.prototype.types=types;
},{"./lib/create":15,"./lib/filter":16,"./lib/lookup":17,"./lib/operators":18,"./lib/parens":19,"./lib/types":20,"just-debounce":21}],15:[function(require,module,exports){
function accessor(t,i){function r(t,r,l){return t||(s=l||r),t===n.length?i.call(this,r,s):(n[t](r,s),void 0)}for(var s,n=t.split("->"),l=0,e=n.length;e>l;++l)n[l]=build_part.call(this,n[l],r.bind(this,l+1));return r.bind(this,0)}function build_part(t,i){for(var r,s=0,n=this.types.length;n>s;++s)if(r=this.types[s].call(this,t,i))return r}module.exports=accessor;
},{}],16:[function(require,module,exports){
function add_filter(r){r.push(create_filter)}function create_filter(r,e){if(r=r.match(filter_regexp)){var t=this.filters[r[1]];if(!t)throw new Error("could not find filter: "+r[1]);return t.call(this,r[2],e)}}var filter_regexp=/^\s*([^\s(]+)\((.*)\)\s*$/;module.exports=add_filter;
},{}],17:[function(require,module,exports){
function add_lookup(o){o.push(create_lookup)}function create_lookup(o,t){return o.indexOf("$data")||(o=o.slice("$data.".length)),lookup(o.match(/\s*(.*[^\s])\s*/)[1],t)}function lookup(o,t){var u=o?o.split("."):[];return function(o){for(var n=0,e=u.length;o&&e>n;++n)o=o[u[n]];return n===e?t(o):(t(),void 0)}}module.exports=add_lookup;
},{}],18:[function(require,module,exports){
function add_operators(r){r.push(create_ternary),r.push(binary(["|\\|"])),r.push(binary(["&&"])),r.push(binary(["|"])),r.push(binary(["^"])),r.push(binary(["&"])),r.push(binary(["===","!==","==","!="])),r.push(binary([">=","<=",">","<"," in "," instanceof "])),r.push(binary(["+","-"])),r.push(binary(["*","/","%"])),r.push(unary(["!","+","-","~"]))}function binary(r){var n=new RegExp("^\\s*(.+?)\\s*(\\"+r.join("|\\")+")\\s*(.+?)\\s*$");return function(r,t){return create_binary.call(this,n,r,t)}}function unary(r){var n=new RegExp("^\\s*(\\"+r.join("|\\")+")\\s*(.+?)\\s*$");return function(r,t){return create_unary.call(this,n,r,t)}}function create_ternary(r,n){function t(r,n){return r?h(n):c(n)}if(r=r.match(ternary_regexp)){for(var a=r[1],e=r[2],i=1,u=0,s=e.length;s>u&&(":"===e[u]?--i:"?"===e[u]&&++i,i);++u);if(!u||u===e.length)throw new Error("Unmatched ternary: "+r[0]);var c=this.create_part(e.slice(u+1),n),h=this.create_part(e.slice(0,u),n);return this.create_part(a,t)}}function create_binary(r,n,t){function a(r){s(r),c(r)}function e(r,n){r?u=n:i=n,h(i,u)}if(n=n.match(r)){var i,u,s=this.create_part(n[1],e.bind(null,!1)),c=this.create_part(n[3],e.bind(null,!0)),h=Function("change, lhs, rhs","return change(lhs "+n[2]+" rhs)").bind(null,t);return a}}function create_unary(r,n,t){if(n=n.match(r)){var a=Function("change, val","return change("+n[1]+"val)").bind(null,t);return this.create_part(n[2],a)}}var ternary_regexp=/^\s*(.+?)\s*\?(.*)\s*$/;module.exports=add_operators;
},{}],19:[function(require,module,exports){
function add_parens(e){e.push(create_parens)}function create_parens(e,r){function a(e,r){r=Object.create(r),r[i]=e,o(r)}if(e=e.match(parens_regexp)){for(var t=e[1],n=1,c=0,s=t.length;s>c&&(")"===t[c]?--n:"("===t[c]&&++n,n);++c);if(!c||c===s)throw new Error("Unmatched ternary: "+e[0]);var p=this.create_part(t.slice(0,c),a),i="paren_"+Math.random().toString(16).slice(2),o=this.create_part(i+t.slice(c+1),r);return p}}var parens_regexp=/^\s*\((.*)$/;module.exports=add_parens;
},{}],20:[function(require,module,exports){
function add_types(e){e.push(create_string_accessor),e.push(create_number_accessor)}function create_string_accessor(e,r){return(e=e.match(string_regexp))?function(){r(e[1]||e[2])}:void 0}function create_number_accessor(e,r){return(e=e.match(number_regexp))?function(){r(+e[1])}:void 0}var string_regexp=/^\s*(?:'((?:[^'\\]|(?:\\.))*)'|"((?:[^"\\]|(?:\\.))*)")\s*$/,number_regexp=/^\s*(\d*(?:\.\d+)?)\s*$/;module.exports=add_types;
},{}],21:[function(require,module,exports){
function debounce(e,t,n){var u;return"undefined"==typeof t&&(t=0),function(){function o(){i(),e.apply(c,r)}function i(){clearTimeout(u),u=null}var r=Array.prototype.slice.call(arguments),c=this;if(!u||!n){if(!n)return i(),u=setTimeout(o,t);u=setTimeout(i,t),e.apply(c,r)}}}module.exports=debounce;
},{}]},{},[2])


//# sourceMappingURL=altr.min.map