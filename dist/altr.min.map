{
  "version": 3,
  "file": "bundle.js",
  "sources": [
    "/Users/michaelhayes/work/altr/lib/accessor.js",
    "/Users/michaelhayes/work/altr/lib/altr.js",
    "/Users/michaelhayes/work/altr/lib/browser.js",
    "/Users/michaelhayes/work/altr/lib/element_node.js",
    "/Users/michaelhayes/work/altr/lib/filters/add.js",
    "/Users/michaelhayes/work/altr/lib/index.js",
    "/Users/michaelhayes/work/altr/lib/lookup.js",
    "/Users/michaelhayes/work/altr/lib/tags/for.js",
    "/Users/michaelhayes/work/altr/lib/tags/html.js",
    "/Users/michaelhayes/work/altr/lib/tags/if.js",
    "/Users/michaelhayes/work/altr/lib/tags/include.js",
    "/Users/michaelhayes/work/altr/lib/tags/text.js",
    "/Users/michaelhayes/work/altr/lib/tags/with.js",
    "/Users/michaelhayes/work/altr/lib/template_string.js",
    "/Users/michaelhayes/work/altr/lib/text_node.js"
  ],
  "names": [
    "add_type",
    "regexp",
    "fn",
    "accessor_types",
    "push",
    "test",
    "RegExp",
    "prototype",
    "bind",
    "create",
    "accessor",
    "key",
    "change",
    "call_next",
    "i",
    "val",
    "ctx",
    "context",
    "parts",
    "length",
    "call",
    "this",
    "split",
    "l",
    "build_part",
    "part",
    "create_lookup",
    "path",
    "indexOf",
    "slice",
    "lookup",
    "match",
    "create_filter",
    "filter_name",
    "filter_regexp",
    "filter",
    "filters",
    "Error",
    "create_string_accessor",
    "string",
    "string_regexp",
    "create_number_accessor",
    "num",
    "number_regexp",
    "create_ternary",
    "update",
    "ok",
    "not",
    "ternary_regexp",
    "create_equals",
    "compare",
    "data",
    "check_lhs",
    "check_rhs",
    "is_rhs",
    "rhs",
    "lhs",
    "equals_regexp",
    "require",
    "module",
    "exports",
    "global",
    "altr",
    "root",
    "doc",
    "sync",
    "document",
    "includes",
    "Object",
    "Buffer",
    "toString",
    "temp",
    "createElement",
    "innerHTML",
    "createDocumentFragment",
    "firstChild",
    "appendChild",
    "root_nodes",
    "nodeType",
    "childNodes",
    "tree",
    "create_node",
    "hooks",
    "forEach",
    "update_children",
    "children",
    "node",
    "node_hanlers",
    "default_node",
    "add_filter",
    "name",
    "add_tag",
    "attr",
    "tag",
    "tags",
    "tag_list",
    "constructor",
    "outer_html",
    "outerHTML",
    "el",
    "add_children",
    "map",
    "Boolean",
    "append_to",
    "include",
    "template",
    "template_string",
    "element_node",
    "create_accessor",
    "text_node",
    "into",
    "self",
    "window",
    "create_element_node",
    "altr_tags",
    "attrs",
    "Array",
    "attributes",
    "value",
    "attr_hook",
    "setAttribute",
    "check_num",
    "new_num",
    "new_val",
    "include_tag",
    "text_tag",
    "html_tag",
    "with_tag",
    "for_tag",
    "if_tag",
    "done",
    "obj",
    "for_handler",
    "args",
    "new_items",
    "place",
    "nodes",
    "insertBefore",
    "prev",
    "isArray",
    "index",
    "new_children",
    "offset",
    "items",
    "splice",
    "dom_nodes",
    "make_children",
    "nextSibling",
    "concat",
    "altr_nodes",
    "parentNode",
    "removeChild",
    "createElementNS",
    "namespaceURI",
    "for_regexp",
    "prop",
    "item_data",
    "html",
    "hide",
    "hidden",
    "parent",
    "show",
    "placeholder",
    "toggle",
    "createComment",
    "text",
    "textContent",
    "set_part",
    "idx",
    "join",
    "clearTimeout",
    "timer",
    "setTimeout",
    "hook",
    "TAG",
    "next",
    "remaining",
    "create_text_node"
  ],
  "mappings": "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",
  "sourcesContent": [
    "var lookup = require('./lookup')\n  , accessor_types = []\n\nvar string_regexp = /^\\s*(?:'((?:[^'\\\\]|(?:\\\\.))*)'|\"((?:[^\"\\\\]|(?:\\\\.))*)\")\\s*/\n  , ternary_regexp = /^\\s*([^\\?]+)\\?([^\\?:]+):(.*)\\s*$/\n  , equals_regexp = /^\\s*([^=]+)(={2,3})(.*)\\s*$/\n  , filter_regexp = /^\\s*([^(]+)\\((.*)\\)\\s*$/\n  , number_regexp = /^\\s*(\\d*(?:\\.\\d+)?)\\s*$/\n\nmodule.exports = accessor\n\nadd_type(ternary_regexp, create_ternary)\nadd_type(equals_regexp, create_equals)\nadd_type(filter_regexp, create_filter)\nadd_type(string_regexp, create_string_accessor)\nadd_type(number_regexp, create_number_accessor)\nadd_type(/.*/, create_lookup)\n\nfunction add_type(regexp, fn) {\n  accessor_types.push({test: RegExp.prototype.test.bind(regexp), create: fn})\n}\n\nfunction accessor(key, change) {\n  var parts = key.split('|')\n    , context\n    , next\n    , prev\n\n  for(var i = 0, l = parts.length; i < l; ++i) {\n    parts[i] = build_part.call(this, parts[i], call_next.bind(this, i + 1))\n  }\n\n  return call_next.bind(this, 0)\n\n  function call_next(i, val, ctx) {\n    if(!i) {\n      context = ctx || val\n    }\n\n    if(i === parts.length) {\n      return change.call(this, val, context)\n    }\n\n    parts[i](val, context)\n  }\n\n  function finish(val, context) {\n    if(val === prev) {\n      return\n    }\n\n    prev = val\n    change.call(this, val, context)\n  }\n}\n\nfunction build_part(part, change) {\n  for(var i = 0, l = accessor_types.length; i < l; ++i) {\n    if(accessor_types[i].test(part)) {\n      return accessor_types[i].create.call(this, part, change)\n    }\n  }\n}\n\nfunction create_lookup(path, change) {\n  if(!path.indexOf('$data')) {\n    path = path.slice('$data.'.length)\n  }\n\n  return lookup(path.match(/\\s*(.*[^\\s])\\s*/)[1], change)\n}\n\nfunction create_filter(filter_name, change) {\n  var parts = filter_name.match(filter_regexp)\n    , filter = this.filters[parts[1]]\n\n  if(!filter) {\n    throw new Error('could not find filter: ' + parts[1])\n  }\n\n  return filter.call(this, parts[2], change)\n}\n\nfunction create_string_accessor(string, change) {\n  var match = string.match(string_regexp)\n\n  string = match[1] || match[2]\n\n  return function() {\n    change(string)\n  }\n}\n\nfunction create_number_accessor(num, change) {\n  var match = num.match(number_regexp)\n\n  num = +match[1]\n\n  return function() {\n    change(num)\n  }\n}\n\nfunction create_ternary(parts, change) {\n  parts = parts.match(ternary_regexp)\n\n  var not = accessor(parts[3], change)\n    , ok = accessor(parts[2], change)\n\n  return accessor(parts[1], update)\n\n  function update(val, context) {\n    val ? ok(context) : not(context)\n  }\n}\n\nfunction create_equals(parts, change) {\n  parts = parts.match(equals_regexp)\n\n  var check_lhs = accessor(parts[1], update.bind(null, false))\n    , check_rhs = accessor(parts[3], update.bind(null, true))\n    , lhs = {}\n    , rhs = {}\n\n  return compare\n\n  function compare(data) {\n    check_lhs(data)\n    check_rhs(data)\n  }\n\n  function update(is_rhs, val) {\n    is_rhs ? rhs = val : lhs = val\n    change(parts[2].length === 2 ? lhs == rhs : lhs === rhs)\n  }\n}\n",
    "(function (global){\nvar template_string = require('./template_string')\n  , element_node = require('./element_node')\n  , create_accessor = require('./accessor')\n  , text_node = require('./text_node')\n\nmodule.exports = altr\naltr.add_tag = add_tag\naltr.add_filter = add_filter\n\nfunction altr(root, data, doc, sync) {\n  if(!(this instanceof altr)) {\n    return new altr(root, data, doc, sync)\n  }\n\n  this.root = root\n  this.sync = sync\n  this.document = doc || global.document\n  this.includes = Object.create(this.includes)\n\n  if(global.Buffer && root instanceof global.Buffer) {\n    root = root.toString()\n  }\n\n  if(typeof root === 'string') {\n    var temp = this.document.createElement('div')\n\n    temp.innerHTML = root\n    this.root = this.document.createDocumentFragment()\n\n    while(temp.firstChild) {\n      this.root.appendChild(temp.firstChild)\n    }\n  }\n\n  this.root_nodes = this.root.nodeType === 11 ?\n    [].slice.call(this.root.childNodes) : [this.root]\n\n  this.tree = this.create_node({childNodes: this.root_nodes})\n\n  if(data) {\n    this.update(data)\n  }\n}\n\naltr.prototype.template_string = template_string\naltr.prototype.create_accessor = create_accessor\naltr.prototype.update_children = update_children\naltr.prototype.create_node = create_node\naltr.prototype.toString = outer_html\naltr.prototype.include = include\naltr.prototype.into = append_to\naltr.prototype.update = update\n\naltr.prototype.includes = {}\naltr.prototype.tag_list = []\naltr.prototype.filters = {}\naltr.prototype.tags = {}\n\naltr.include = include.bind(altr.prototype)\n\nvar node_hanlers = {}\n\nnode_hanlers[1] = element_node\nnode_hanlers[3] = text_node\n\nfunction update(data, root) {\n  root = root || this.tree\n\n  if(root.hooks) {\n    root.hooks.forEach(function(update) {\n      update(data)\n    })\n  }\n\n  if(root.update_children) {\n    root.update_children(data)\n  }\n}\n\nfunction update_children(data) {\n  for(var i = 0, l = this.children.length; i < l; ++i) {\n    update(data, this.children[i])\n  }\n}\n\nfunction create_node(node) {\n  return node_hanlers[node.nodeType] ?\n    node_hanlers[node.nodeType].call(this, node) :\n    default_node.call(this, node)\n}\n\nfunction add_filter(name, filter) {\n  altr.prototype.filters[name] = filter\n}\n\nfunction add_tag(attr, tag) {\n  altr.prototype.tags[attr] = tag\n  altr.prototype.tag_list.push({\n      attr: attr\n    , constructor: tag\n  })\n}\n\nfunction outer_html() {\n  return this.root.outerHTML\n}\n\nfunction default_node(el) {\n  return {\n      el: el\n    , update_children: this.update_children\n    , hooks: []\n    , children: add_children.call(this)\n  }\n\n  function add_children() {\n    return [].map.call(\n        el.childNodes || []\n      , this.create_node.bind(this)\n    ).filter(Boolean)\n  }\n}\n\nfunction append_to(node) {\n  for(var i = 0, l = this.root_nodes.length; i < l; ++i) {\n    node.appendChild(this.root_nodes[i])\n  }\n}\n\nfunction include(name, template) {\n  return this.includes[name] = template\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})",
    "(function (global){\nmodule.exports = global.altr = require('./index')\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})",
    "module.exports = create_element_node\n\nfunction create_element_node(el) {\n  var altr_tags = {}\n    , altr = this\n    , attr\n\n  var node = {\n      el: el\n    , update_children: this.update_children\n    , hooks: []\n  }\n\n  var attrs = Array.prototype.filter.call(el.attributes, function(attr) {\n    return altr.tags[attr.name] ?\n      (altr_tags[attr.name] = attr.value) && false :\n      true\n  })\n\n  attrs.forEach(function(attr) {\n    var attr_hook = altr.template_string(attr.value, function(val) {\n      el.setAttribute(attr.name, val)\n    })\n\n    if(attr_hook) {\n      node.hooks.push(attr_hook)\n    }\n  })\n\n  for(var i = 0, l = altr.tag_list.length; i < l; ++i) {\n    attr = altr_tags[altr.tag_list[i].attr]\n\n    if(attr) {\n      altr.tag_list[i].constructor.call(altr, node, attr)\n    }\n  }\n\n  node.children = [].map.call(\n      el.childNodes\n    , altr.create_node.bind(altr)\n  ).filter(Boolean)\n\n  if(node.children.length || node.hooks.length) {\n    return node\n  }\n}\n",
    "module.exports = function(accessor, change) {\n  var val, num\n\n  var check_num = this.create_accessor(accessor, function(new_num) {\n    change((num = +new_num) + (val || 0))\n  })\n\n  return function add(new_val, context) {\n    val = +new_val\n    check_num(context)\n  }\n}\n",
    "var include_tag = require('./tags/include')\n  , add_filter = require('./filters/add')\n  , text_tag = require('./tags/text')\n  , html_tag = require('./tags/html')\n  , with_tag = require('./tags/with')\n  , for_tag = require('./tags/for')\n  , if_tag = require('./tags/if')\n  , altr = require('./altr')\n\nmodule.exports = altr\n\naltr.add_tag('altr-include', include_tag)\naltr.add_tag('altr-text', text_tag)\naltr.add_tag('altr-html', html_tag)\naltr.add_tag('altr-with', with_tag)\naltr.add_tag('altr-for', for_tag)\naltr.add_tag('altr-if', if_tag)\n\naltr.add_filter('add', add_filter)\n",
    "module.exports = lookup\n\nfunction lookup(path, done) {\n  var parts = path ? path.split('.') : []\n\n  return function(obj) {\n    for(var i = 0, l = parts.length; obj && i < l; ++i) {\n      obj = obj[parts[i]]\n    }\n\n    if(i === l) {\n      return done(obj)\n    }\n\n    done()\n  }\n}\n",
    "var for_regexp = /^(.*?)\\s+in\\s+(.*$)/\n\nmodule.exports = for_handler\n\nfunction for_handler(node, args) {\n  var parts = args.match(for_regexp)\n    , template = node.el.innerHTML\n    , children = []\n    , altr = this\n    , items = []\n\n  if(!parts) {\n    throw new Error('invalid for tag: ' + args)\n  }\n\n  node.el.innerHTML = ''\n\n  var prop = parts[1]\n    , key = parts[2]\n\n  node.hooks.push(altr.create_accessor(key, update))\n\n  node.update_children = function(data) {\n    var item_data\n\n    for(var i = 0, l = node.children.length; i < l; ++i) {\n      item_data = Object.create(data)\n      item_data[prop] = data[key][i]\n      item_data['$index'] = i\n      altr.update(item_data, node.children[i])\n    }\n  }\n\n  function update(new_items) {\n    if(!Array.isArray(new_items)) {\n      new_items = []\n    }\n\n    var new_children = new Array(new_items.length)\n      , prev = node.el.firstChild\n      , offset = 0\n      , index\n      , nodes\n\n    node.children = []\n\n    for(var i = 0, l = new_items.length; i < l; ++i) {\n      index = items.indexOf(new_items[i])\n\n      if(index !== -1) {\n        new_children[i] = (children.splice(index, 1)[0])\n        items.splice(index, 1)\n\n        if(index + offset !== i) {\n          place(new_children[i].dom_nodes)\n        }\n\n        ++offset\n      } else {\n        new_children[i] = make_children()\n        place(new_children[i].dom_nodes)\n        ++offset\n      }\n\n      nodes = new_children[i].dom_nodes\n      prev = nodes[nodes.length - 1].nextSibling\n      nodes = nodes.concat(new_children[i].dom_nodes)\n      node.children = node.children.concat(new_children[i].altr_nodes)\n    }\n\n    for(var i = 0, l = children.length; i < l; ++i) {\n      children[i].dom_nodes.forEach(function(node) {\n        node.parentNode.removeChild(node)\n      })\n    }\n\n    children = new_children.slice()\n    items = new_items.slice()\n\n    function place(nodes) {\n      for(var i = 0, l = nodes.length; i < l; ++i) {\n        node.el.insertBefore(nodes[i], prev)\n      }\n    }\n  }\n\n  function make_children() {\n    var temp = altr.document.createElementNS(node.el.namespaceURI, 'div')\n      , altr_nodes\n      , dom_nodes\n\n    temp.innerHTML = template\n\n    dom_nodes = Array.prototype.slice.call(temp.childNodes)\n    altr_nodes = dom_nodes.map(altr.create_node.bind(altr)).filter(Boolean)\n\n    return {\n        dom_nodes: dom_nodes\n      , altr_nodes: altr_nodes\n    }\n  }\n}\n",
    "module.exports = html\n\nfunction html(node, accessor) {\n  node.hooks.push(this.create_accessor(accessor, update))\n\n  function update(val) {\n    node.el.innerHTML = typeof val === 'undefined' ? '' : val\n  }\n}\n",
    "module.exports = if_tag\n\nfunction if_tag(node, accessor) {\n  var placeholder = this.document.createComment('altr-if-placeholder')\n    , parent = node.el.parentNode\n    , hidden = null\n\n  parent.insertBefore(placeholder, node.el)\n  node.hooks.push(this.create_accessor(accessor, toggle))\n\n  function hide() {\n    if(!hidden) {\n      hidden = node.children || []\n      node.children = []\n      parent.removeChild(node.el)\n    }\n  }\n\n  function show() {\n    if(hidden) {\n      parent.insertBefore(node.el, placeholder)\n      node.children = hidden\n      hidden = null\n    }\n  }\n\n  function toggle(val) {\n    val ? show() : hide()\n  }\n}\n",
    "module.exports = include\n\nfunction include(node, name) {\n  node.el.innerHTML = this.includes[name]\n}\n",
    "module.exports = text\n\nfunction text(node, accessor) {\n  node.hooks.push(this.create_accessor(accessor, update))\n\n  function update(val) {\n    node.el.textContent = typeof val === 'undefined' ? '' : val\n  }\n}\n",
    "module.exports = with_tag\n\nfunction with_tag(node, accessor) {\n  node.update_children = this.create_accessor(\n      accessor\n    , node.update_children.bind(node)\n  )\n}\n",
    "var TAG = /{{\\s*(.*?)\\s*}}/\n\nmodule.exports = template_string\n\nfunction template_string(template, change) {\n  if(!template.match(TAG)) {\n    return\n  }\n\n  var remaining = template\n    , parts = []\n    , hooks = []\n    , timer\n    , index\n    , next\n\n  while(remaining && (next = remaining.match(TAG))) {\n    if(index = remaining.indexOf(next[0])) {\n      parts.push(remaining.slice(0, index))\n    }\n\n    parts.push('')\n    remaining = remaining.slice(index + next[0].length)\n    hooks.push(\n        this.create_accessor(next[1], set_part.bind(this, parts.length - 1))\n    )\n  }\n\n  return update\n\n  function set_part(idx, val) {\n    parts[idx] = val\n\n    if(this.sync) {\n      return change(parts.join(''))\n    }\n\n    clearTimeout(timer)\n\n    timer = setTimeout(function() {\n      change(parts.join(''))\n    }, 0)\n  }\n\n  function update(data) {\n    hooks.forEach(function(hook) {\n      hook(data)\n    })\n  }\n}\n",
    "module.exports = create_text_node\n\nfunction create_text_node(el) {\n  var hook = this.template_string(el.textContent, update)\n\n  if(!hook) {\n    return\n  }\n\n  return {\n      el: el\n    , text: el.textContent\n    , hooks: [hook]\n  }\n\n  function update(val) {\n    el.textContent = val\n  }\n}\n"
  ],
  "sourceRoot": ""
}