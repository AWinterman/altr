{
  "version": 3,
  "file": "bundle.js",
  "sources": [
    "/Users/michaelhayes/work/altr/lib/altr.js",
    "/Users/michaelhayes/work/altr/lib/batch.js",
    "/Users/michaelhayes/work/altr/lib/browser.js",
    "/Users/michaelhayes/work/altr/lib/element_node.js",
    "/Users/michaelhayes/work/altr/lib/index.js",
    "/Users/michaelhayes/work/altr/lib/tags/for.js",
    "/Users/michaelhayes/work/altr/lib/tags/html.js",
    "/Users/michaelhayes/work/altr/lib/tags/if.js",
    "/Users/michaelhayes/work/altr/lib/tags/include.js",
    "/Users/michaelhayes/work/altr/lib/tags/text.js",
    "/Users/michaelhayes/work/altr/lib/tags/with.js",
    "/Users/michaelhayes/work/altr/lib/template_string.js",
    "/Users/michaelhayes/work/altr/lib/text_node.js",
    "/Users/michaelhayes/work/altr/node_modules/altr-accessors/index.js",
    "/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/arrow.js",
    "/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/create.js",
    "/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/filter.js",
    "/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/lookup.js",
    "/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/operators.js",
    "/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/parens.js",
    "/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/split.js",
    "/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/types.js",
    "/Users/michaelhayes/work/altr/node_modules/altr-accessors/node_modules/just-debounce/index.js"
  ],
  "names": [
    "global",
    "altr",
    "root",
    "data",
    "sync",
    "doc",
    "this",
    "batch",
    "document",
    "filters",
    "Object",
    "create",
    "includes",
    "accessors",
    "Buffer",
    "toString",
    "temp",
    "createElement",
    "innerHTML",
    "createDocumentFragment",
    "firstChild",
    "appendChild",
    "root_nodes",
    "nodeType",
    "slice",
    "call",
    "childNodes",
    "update",
    "init_nodes",
    "nodes",
    "i",
    "l",
    "hooks",
    "length",
    "map",
    "init_el",
    "bind",
    "filter",
    "Boolean",
    "el",
    "node_handlers",
    "add_filter",
    "name",
    "prototype",
    "add_tag",
    "attr",
    "tag",
    "tags",
    "tag_list",
    "push",
    "constructor",
    "outer_html",
    "outerHTML",
    "append_to",
    "node",
    "include",
    "template",
    "create_accessor",
    "description",
    "change",
    "fn",
    "template_string",
    "require",
    "element_node",
    "text_node",
    "module",
    "exports",
    "into",
    "self",
    "window",
    "Batch",
    "jobs",
    "frame",
    "run",
    "add",
    "queue",
    "args",
    "arguments",
    "queued",
    "apply",
    "request_frame",
    "requestAnimationFrame",
    "callback",
    "timeout",
    "setTimeout",
    "raf",
    "webkitRequestAnimationFrame",
    "mozRequestAnimationFrame",
    "create_element_node",
    "altr_tags",
    "attrs",
    "Array",
    "attributes",
    "value",
    "forEach",
    "indexOf",
    "attr_hook",
    "val",
    "setAttribute",
    "include_tag",
    "text_tag",
    "html_tag",
    "with_tag",
    "for_tag",
    "if_tag",
    "for_handler",
    "update_children",
    "item_data",
    "children",
    "prop",
    "items",
    "new_items",
    "place",
    "prev",
    "dom_updates",
    "insert",
    "before",
    "isArray",
    "index",
    "new_children",
    "offset",
    "find_index",
    "unique",
    "splice",
    "dom_nodes",
    "make_children",
    "nextSibling",
    "concat",
    "remove",
    "run_updates",
    "d",
    "createElementNS",
    "namespaceURI",
    "run_dom_updates",
    "j",
    "l2",
    "removeChild",
    "insertBefore",
    "parts",
    "match",
    "for_regexp",
    "Error",
    "split",
    "key",
    "html",
    "accessor",
    "toggle",
    "show",
    "hide",
    "placeholder",
    "createComment",
    "parent",
    "parentNode",
    "hidden",
    "text",
    "textContent",
    "set_part",
    "idx",
    "join",
    "hook",
    "TAG",
    "next",
    "remaining",
    "create_text_node",
    "delay",
    "str",
    "create_part",
    "debounce",
    "add_operators",
    "create_accesor",
    "add_lookup",
    "add_parens",
    "add_types",
    "add_arrow",
    "types",
    "create_arrow",
    "ctx",
    "right",
    "left",
    "part",
    "context",
    "finish",
    "build_part",
    "create_filter",
    "filter_regexp",
    "create_lookup",
    "path",
    "lookup",
    "done",
    "search",
    "obj",
    "create_ternary",
    "binary",
    "unary",
    "list",
    "regex",
    "RegExp",
    "create_binary",
    "create_unary",
    "ok",
    "not",
    "ternary_regexp",
    "condition",
    "rest",
    "on_data",
    "check_lhs",
    "check_rhs",
    "is_rhs",
    "rhs",
    "lhs",
    "changed",
    "Function",
    "create_parens",
    "parens_regexp",
    "body",
    "count",
    "content",
    "Math",
    "random",
    "opens",
    "closes",
    "all",
    "split_point",
    "all_closes",
    "all_opens",
    "sum",
    "counts",
    "create_string_accessor",
    "create_number_accessor",
    "string_regexp",
    "number_regexp",
    "at_start",
    "guarantee",
    "clear",
    "clearTimeout"
  ],
  "mappings": "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",
  "sourcesContent": [
    "(function (global){\nvar template_string = require('./template_string')\n  , element_node = require('./element_node')\n  , accessors = require('altr-accessors')\n  , text_node = require('./text_node')\n  , batch = require('./batch')\n\nmodule.exports = altr\naltr.add_tag = add_tag\naltr.include = include.bind(altr.prototype)\naltr.add_filter = add_filter.bind(altr.prototype)\n\nfunction altr(root, data, sync, doc) {\n  if(!(this instanceof altr)) {\n    return new altr(root, data, sync, doc)\n  }\n\n  this.root = root\n  this.sync = sync\n  this.batch = batch(sync)\n  this.document = doc || global.document\n  this.filters = Object.create(this.filters)\n  this.includes = Object.create(this.includes)\n  this.accessors = accessors(this.filters, false)\n\n  if(global.Buffer && root instanceof global.Buffer) {\n    root = root.toString()\n  }\n\n  if(typeof root === 'string') {\n    var temp = this.document.createElement('div')\n\n    temp.innerHTML = root\n    this.root = this.document.createDocumentFragment()\n\n    while(temp.firstChild) {\n      this.root.appendChild(temp.firstChild)\n    }\n  }\n\n  this.root_nodes = this.root.nodeType === 11 ?\n    [].slice.call(this.root.childNodes) : [this.root]\n\n  this.update = this.init_nodes(this.root_nodes)\n\n  if(data) {\n    this.update(data)\n  }\n}\n\naltr.prototype.template_string = template_string\naltr.prototype.create_accessor = create_accessor\naltr.prototype.add_filter = add_filter\naltr.prototype.init_nodes = init_nodes\naltr.prototype.toString = outer_html\naltr.prototype.init_el = init_el\naltr.prototype.include = include\naltr.prototype.into = append_to\n\naltr.prototype.includes = {}\naltr.prototype.tag_list = []\naltr.prototype.filters = {}\naltr.prototype.tags = {}\n\nvar node_handlers = {}\n\nnode_handlers[1] = element_node\nnode_handlers[3] = text_node\n\nfunction init_nodes(nodes) {\n  var hooks = [].map.call(nodes, init_el.bind(this)).filter(Boolean)\n\n  return update\n\n  function update(data) {\n    for(var i = 0, l = hooks.length; i < l; ++i) {\n      hooks[i](data)\n    }\n  }\n}\n\nfunction init_el(el) {\n  return node_handlers[el.nodeType] ?\n    node_handlers[el.nodeType].call(this, el) :\n    el.childNodes && el.childNodes.length ?\n    this.init_nodes(el.childNodes) :\n    null\n}\n\nfunction add_filter(name, filter) {\n  altr.prototype.filters[name] = filter\n}\n\nfunction add_tag(attr, tag) {\n  altr.prototype.tags[attr] = tag\n  altr.prototype.tag_list.push({\n      attr: attr\n    , constructor: tag\n  })\n}\n\nfunction outer_html() {\n  return this.root.outerHTML\n}\n\nfunction append_to(node) {\n  for(var i = 0, l = this.root_nodes.length; i < l; ++i) {\n    node.appendChild(this.root_nodes[i])\n  }\n}\n\nfunction include(name, template) {\n  return this.includes[name] = template\n}\n\nfunction create_accessor(description, change) {\n  return this.accessors.create(description, change, false)\n}\n\nfunction add_filter(name, fn) {\n  return this.filters[name] = fn\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})",
    "(function (global){\nmodule.exports = Batch\n\nfunction Batch(sync) {\n  if(!(this instanceof Batch)) {\n    return new Batch(sync)\n  }\n\n  this.jobs = []\n  this.sync = sync\n  this.frame = null\n  this.run = this.run.bind(this)\n}\n\nBatch.prototype.request_frame = request_frame\nBatch.prototype.queue = queue\nBatch.prototype.add = add\nBatch.prototype.run = run\n\nfunction add(fn) {\n  var queued = false\n    , batch = this\n    , self\n    , args\n\n  return queue\n\n  function queue() {\n    args = [].slice.call(arguments)\n    self = this\n\n    if(!queued) {\n      queued = true\n      batch.queue(run)\n    }\n  }\n\n  function run() {\n    queued = false\n    fn.apply(self, args)\n  }\n}\n\nfunction queue(fn) {\n  if(this.sync) {\n    return fn()\n  }\n\n  this.jobs.push(fn)\n  this.request_frame()\n}\n\nfunction run() {\n  var jobs = this.jobs\n\n  this.jobs = []\n  this.frame = null\n\n  for(var i = 0, l = jobs.length; i < l; ++i) {\n    jobs[i]()\n  }\n}\n\nfunction request_frame() {\n  if(this.frame) {\n    return\n  }\n\n  this.frame = requestAnimationFrame(this.run)\n}\n\nfunction requestAnimationFrame(callback) {\n  var raf = global.requestAnimationFrame ||\n    global.webkitRequestAnimationFrame ||\n    global.mozRequestAnimationFrame ||\n    timeout\n\n  return raf(callback)\n\n  function timeout(callback) {\n    return setTimeout(callback, 1000 / 60)\n  }\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})",
    "(function (global){\nmodule.exports = global.altr = require('./index')\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})",
    "module.exports = create_element_node\n\nfunction create_element_node(el) {\n  var altr_tags = {}\n    , altr = this\n    , hooks = []\n    , attr\n\n  var attrs = Array.prototype.filter.call(el.attributes, function(attr) {\n    return altr.tags[attr.name] ?\n      (altr_tags[attr.name] = attr.value) && false :\n      true\n  })\n\n  attrs.forEach(function(attr) {\n    var name = attr.name.indexOf('altr-attr-') ?\n      attr.name :\n      attr.name.slice('altr-attr-'.length)\n\n    var attr_hook = altr.template_string(\n        attr.value\n      , altr.batch.add(function(val) {\n          el.setAttribute(name, val)\n        })\n    )\n\n    if(attr_hook) {\n      hooks.push(attr_hook)\n    }\n  })\n\n  for(var i = 0, l = altr.tag_list.length; i < l; ++i) {\n    if(attr = altr_tags[altr.tag_list[i].attr]) {\n      hooks.push(altr.tag_list[i].constructor.call(altr, el, attr))\n\n      return update\n    }\n  }\n\n  hooks.push(altr.init_nodes(el.childNodes))\n\n  return update\n\n  function update(data) {\n    for(var i = 0, l = hooks.length; i < l; ++i) {\n      hooks[i](data)\n    }\n  }\n}\n",
    "var include_tag = require('./tags/include')\n  , text_tag = require('./tags/text')\n  , html_tag = require('./tags/html')\n  , with_tag = require('./tags/with')\n  , for_tag = require('./tags/for')\n  , if_tag = require('./tags/if')\n  , altr = require('./altr')\n\nmodule.exports = altr\n\naltr.add_tag('altr-include', include_tag)\naltr.add_tag('altr-text', text_tag)\naltr.add_tag('altr-html', html_tag)\naltr.add_tag('altr-with', with_tag)\naltr.add_tag('altr-for', for_tag)\naltr.add_tag('altr-if', if_tag)\n",
    "var for_regexp = /^(.*?)\\s+in\\s+(.*$)/\n\nmodule.exports = for_handler\n\nfunction for_handler(root, args) {\n  var parts = args.match(for_regexp)\n    , template = root.innerHTML\n    , dom_updates = []\n    , children = []\n    , altr = this\n    , items = []\n\n  if(!parts) {\n    throw new Error('invalid for tag: ' + args)\n  }\n\n  root.innerHTML = ''\n\n  var unique = parts[1].split(':')[1]\n    , prop = parts[1].split(':')[0]\n    , key = parts[2]\n\n  var run_updates = this.batch.add(run_dom_updates)\n\n  return altr.create_accessor(key, update)\n\n  function update_children(data) {\n    var item_data\n\n    for(var i = 0, l = children.length; i < l; ++i) {\n      item_data = Object.create(data)\n      item_data[prop] = items[i]\n      item_data['$index'] = i\n\n      children[i].update && children[i].update(item_data)\n    }\n  }\n\n  function update(new_items, data) {\n    if(!Array.isArray(new_items)) {\n      new_items = []\n    }\n\n    var new_children = new Array(new_items.length)\n      , prev = root.firstChild\n      , offset = 0\n      , index\n      , nodes\n\n    for(var i = 0, l = new_items.length; i < l; ++i) {\n      index = find_index(items, new_items[i], unique)\n\n      if(index !== -1) {\n        new_children[i] = (children.splice(index, 1)[0])\n        items.splice(index, 1)\n\n        if(index + offset !== i) {\n          place(new_children[i].dom_nodes, prev)\n        }\n      } else {\n        new_children[i] = make_children()\n        place(new_children[i].dom_nodes, prev)\n      }\n\n      ++offset\n      nodes = new_children[i].dom_nodes\n      prev = nodes.length ? nodes[nodes.length - 1].nextSibling : null\n      nodes = nodes.concat(new_children[i].dom_nodes)\n    }\n\n    for(var i = 0, l = children.length; i < l; ++i) {\n      dom_updates.push({remove: children[i].dom_nodes})\n    }\n\n    children = new_children.slice()\n    items = new_items.slice()\n    run_updates()\n    update_children(data)\n\n    function place(nodes, prev) {\n      dom_updates.push({\n          insert: nodes\n        , before: prev\n      })\n    }\n  }\n\n  function find_index(items, d, unique) {\n    if(!unique) {\n      return items.indexOf(d)\n    }\n\n    for(var i = 0, l = items.length; i < l; ++i) {\n      if(items[i][unique] === d[unique]) {\n        return i\n      }\n    }\n\n    return -1\n  }\n\n  function make_children() {\n    var temp = altr.document.createElementNS(root.namespaceURI, 'div')\n      , dom_nodes\n      , update\n\n    temp.innerHTML = template\n\n    dom_nodes = Array.prototype.slice.call(temp.childNodes)\n    update = altr.init_nodes(dom_nodes)\n\n    return {\n        dom_nodes: dom_nodes\n      , update: update\n    }\n  }\n\n  function run_dom_updates() {\n    var update\n\n    for(var i = 0, l = dom_updates.length; i < l; ++i) {\n      update = dom_updates[i]\n\n      if(update.remove) {\n        for(var j = 0, l2 = update.remove.length; j < l2; ++j) {\n          root.removeChild(update.remove[j])\n        }\n      }\n\n      if(update.insert) {\n        for(var j = 0, l2 = update.insert.length; j < l2; ++j) {\n          root.insertBefore(update.insert[j], update.before)\n        }\n      }\n    }\n\n    dom_updates = []\n  }\n}\n",
    "module.exports = html\n\nfunction html(el, accessor) {\n  return this.batch.add(this.create_accessor(accessor, update))\n\n  function update(val) {\n    el.innerHTML = typeof val === 'undefined' ? '' : val\n  }\n}\n",
    "module.exports = if_tag\n\nfunction if_tag(el, accessor) {\n  var placeholder = this.document.createComment('altr-if-placeholder')\n    , update_children = this.init_nodes(el.childNodes)\n    , parent = el.parentNode\n    , hidden = null\n\n  parent.insertBefore(placeholder, el.nextSibling)\n\n  var hide = this.batch.add(function() {\n    if(!hidden) {\n      parent.removeChild(el)\n      hidden = true\n    }\n  })\n\n  var show = this.batch.add(function() {\n    if(hidden) {\n      parent.insertBefore(el, placeholder)\n      hidden = false\n    }\n  })\n\n  return this.batch.add(this.create_accessor(accessor, toggle))\n\n  function toggle(val, data) {\n    val ? show() && update_children(data) : hide()\n  }\n}\n",
    "module.exports = include\n\nfunction include(el, name) {\n  el.innerHTML = this.includes[name]\n\n  return this.init_nodes(el.childNodes)\n}\n",
    "module.exports = text\n\nfunction text(el, accessor) {\n  return this.batch.add(this.create_accessor(accessor, update))\n\n  function update(val) {\n    el.textContent = typeof val === 'undefined' ? '' : val\n  }\n}\n",
    "module.exports = with_tag\n\nfunction with_tag(el, accessor) {\n  return this.create_accessor(accessor, this.init_nodes(el.childNodes))\n}\n",
    "var TAG = /{{\\s*(.*?)\\s*}}/\n\nmodule.exports = template_string\n\nfunction template_string(template, change) {\n  if(!template.match(TAG)) {\n    return\n  }\n\n  var remaining = template\n    , parts = []\n    , hooks = []\n    , timer\n    , index\n    , next\n\n  while(remaining && (next = remaining.match(TAG))) {\n    if(index = remaining.indexOf(next[0])) {\n      parts.push(remaining.slice(0, index))\n    }\n\n    parts.push('')\n    remaining = remaining.slice(index + next[0].length)\n    hooks.push(\n        this.create_accessor(next[1], set_part.bind(this, parts.length - 1))\n    )\n  }\n\n  parts.push(remaining)\n\n  return update\n\n  function set_part(idx, val) {\n    parts[idx] = val\n    change(parts.join(''))\n  }\n\n  function update(data) {\n    hooks.forEach(function(hook) {\n      hook(data)\n    })\n  }\n}\n",
    "module.exports = create_text_node\n\nfunction create_text_node(el) {\n  return this.template_string(el.textContent, this.batch.add(update))\n\n  function update(val) {\n    el.textContent = val\n  }\n}\n",
    "var add_operators = require('./lib/operators')\n  , create_accesor = require('./lib/create')\n  , add_lookup = require('./lib/lookup')\n  , add_filter = require('./lib/filter')\n  , add_parens = require('./lib/parens')\n  , debounce = require('just-debounce')\n  , add_types = require('./lib/types')\n  , add_arrow = require('./lib/arrow')\n  , split = require('./lib/split')\n  , types = []\n\nmodule.exports = accessors\n\n// order is important\nadd_types(types)\nadd_arrow(types)\nadd_filter(types)\nadd_parens(types)\nadd_operators(types)\nadd_lookup(types)\n\naccessors.prototype.create_part = create_accesor\naccessors.prototype.add_filter = add_filter\naccessors.prototype.create = create\naccessors.prototype.types = types\naccessors.prototype.split = split\n\nfunction accessors(filters, delay) {\n  if(!(this instanceof accessors)) {\n    return new accessors(filters, delay)\n  }\n\n  if(!delay && delay !== false) {\n    delay = 0\n  }\n\n  this.delay = delay\n  this.filters = filters || {}\n}\n\nfunction add_filter(name, fn) {\n  this.filters[name] = fn\n}\n\nfunction create(str, change) {\n  return this.create_part(\n      str\n    , this.delay === false ? change : debounce(change, this.delay, false, true)\n  )\n}\n",
    "module.exports = add_arrow\n\nfunction add_arrow(types) {\n  types.push(create_arrow)\n}\n\nfunction create_arrow(parts, change) {\n  parts = this.split(parts, '->')\n\n  if(parts.length < 2) {\n    return\n  }\n\n  var right = this.create_part(parts[1], change)\n    , left = this.create_part(parts[0], update)\n\n  return left\n\n  function update(val, ctx) {\n    right(val, ctx)\n  }\n}\n",
    "module.exports = accessor\n\nfunction accessor(key, change) {\n  var part = build_part.call(this, key, finish)\n    , context\n    , prev\n\n  return call.bind(this)\n\n  function call(val, ctx) {\n    part(val, context = ctx || val)\n  }\n\n  function finish(val) {\n    if(typeof val !== 'object' && val === prev) {\n      return\n    }\n\n    prev = val\n    change.call(this, val, context)\n  }\n}\n\nfunction build_part(part, change) {\n  var accessor\n\n  for(var i = 0, l = this.types.length; i < l; ++i) {\n    if(accessor = this.types[i].call(this, part, change)) {\n      return accessor\n    }\n  }\n}\n",
    "var filter_regexp = /^\\s*([^\\s(]+)\\((.*)\\)\\s*$/\n\nmodule.exports = add_filter\n\nfunction add_filter(types) {\n  types.push(create_filter)\n}\n\nfunction create_filter(parts, change) {\n  if(!(parts = parts.match(filter_regexp))) {\n    return\n  }\n\n  var filter = this.filters[parts[1]]\n\n  if(!filter) {\n    throw new Error('could not find filter: ' + parts[1])\n  }\n\n  return filter.call(this, this.split(parts[2], ',', null, null, true), change)\n}\n",
    "module.exports = add_lookup\n\nfunction add_lookup(types) {\n  types.push(create_lookup)\n}\n\nfunction create_lookup(path, change) {\n  if(!path.indexOf('$data')) {\n    path = path.slice('$data.'.length)\n\n    if(!path) {\n      return change\n    }\n  }\n\n  return lookup(path.match(/\\s*(.*[^\\s])\\s*/)[1], change)\n}\n\nfunction lookup(path, done) {\n  var parts = path ? path.split('.') : []\n\n  return function search(obj, ctx) {\n    for(var i = 0, l = parts.length; obj && i < l; ++i) {\n      obj = obj[parts[i]]\n    }\n\n    if(typeof obj === 'undefined' && ctx) {\n      return search(ctx)\n    }\n\n    if(i === l) {\n      return done(obj)\n    }\n\n    done()\n  }\n}\n",
    "var ternary_regexp = /^\\s*(.+?)\\s*\\?(.*)\\s*$/\n\nmodule.exports = add_operators\n\nfunction add_operators(types) {\n  types.push(create_ternary)\n  types.push(binary(['|\\\\|']))\n  types.push(binary(['&&']))\n  types.push(binary(['|']))\n  types.push(binary(['^']))\n  types.push(binary(['&']))\n  types.push(binary(['===', '!==', '==', '!=']))\n  types.push(binary(['>=', '<=', '>', '<', ' in ', ' instanceof ']))\n  // types.push(binary(['<<', '>>', '>>>'])) //conflics with < and >\n  types.push(binary(['+', '-']))\n  types.push(binary(['*', '/', '%']))\n  types.push(unary(['!', '+', '-', '~']))\n}\n\nfunction binary(list) {\n  var regex = new RegExp(\n      '^\\\\s*(.+?)\\\\s\\*(\\\\' +\n      list.join('|\\\\') +\n      ')\\\\s*(.+?)\\\\s*$'\n  )\n\n  return function(parts, change) {\n    return create_binary.call(this, regex, parts, change)\n  }\n}\n\nfunction unary(list) {\n  var regex = new RegExp(\n      '^\\\\s*(\\\\' +\n      list.join('|\\\\') +\n      ')\\\\s*(.+?)\\\\s*$'\n  )\n\n  return function(parts, change) {\n    return create_unary.call(this, regex, parts, change)\n  }\n}\n\nfunction create_ternary(parts, change) {\n  if(!(parts = parts.match(ternary_regexp))) {\n    return\n  }\n\n  var condition = parts[1]\n    , rest = parts[2]\n    , count = 1\n\n  rest = this.split(rest, ['?'], [':'], ':')\n\n  if(rest.length !== 2) {\n    throw new Error('Unmatched ternary: ' + parts[0])\n  }\n\n  var not = this.create_part(rest[1], change)\n    , ok = this.create_part(rest[0], change)\n\n  return this.create_part(condition, update)\n\n  function update(val, context) {\n    return val ? ok(context) : not(context)\n  }\n}\n\nfunction create_binary(regex, parts, change) {\n  if(!(parts = parts.match(regex))) {\n    return\n  }\n\n  var check_lhs = this.create_part(parts[1], update.bind(null, false))\n    , check_rhs = this.create_part(parts[3], update.bind(null, true))\n    , lhs\n    , rhs\n\n  var changed = Function(\n      'change, lhs, rhs'\n    , 'return change(lhs ' + parts[2] + ' rhs)'\n  ).bind(null, change)\n\n  return on_data\n\n  function on_data(data, ctx) {\n    check_lhs(data, ctx)\n    check_rhs(data, ctx)\n  }\n\n  function update(is_rhs, val) {\n    is_rhs ? rhs = val : lhs = val\n    changed(lhs, rhs)\n  }\n}\n\nfunction create_unary(regex, parts, change) {\n  if(!(parts = parts.match(regex))) {\n    return\n  }\n\n  var changed = Function(\n      'change, val'\n    , 'return change(' + parts[1] + 'val)'\n  ).bind(null, change)\n\n  return this.create_part(parts[2], changed)\n}\n",
    "var parens_regexp = /^\\s*\\((.*)$/\n\nmodule.exports = add_parens\n\nfunction add_parens(types) {\n  types.push(create_parens)\n}\n\nfunction create_parens(parts, change) {\n  if(!(parts = parts.match(parens_regexp))) {\n    return\n  }\n\n  var body = parts[1]\n    , count = 1\n\n  for(var i = 0, l = body.length; i < l; ++i) {\n    if(body[i] === ')') {\n      --count\n    } else if(body[i] === '(') {\n      ++count\n    }\n\n    if(!count) {\n      break\n    }\n  }\n\n  if(!i || i === l) {\n    throw new Error('Unmatched ternary: ' + parts[0])\n  }\n\n  var content =  this.create_part(body.slice(0, i), update)\n    , key = 'paren_' + Math.random().toString(16).slice(2)\n\n  var template = this.create_part(key + body.slice(i + 1), change)\n\n  return content\n\n  function update(val, context) {\n    context = Object.create(context)\n    context[key] = val\n    template(context)\n  }\n}\n",
    "module.exports = split\n\nfunction split(parts, key, opens, closes, all) {\n  var all_closes = [')', '}', ']']\n    , all_opens = ['(', '{', '[']\n    , sum = 0\n    , split_point\n    , index\n\n  if(opens) {\n    all_opens = all_opens.concat(opens)\n  }\n\n  if(closes) {\n    all_closes = all_closes.concat(closes)\n  }\n\n  var counts = all_opens.map(function() {\n    return 0\n  })\n\n  for(var i = 0, l = parts.length; i < l; ++i) {\n    if(!sum && (split_point = parts.slice(i).indexOf(key)) === -1) {\n      return [parts]\n    }\n\n    if(!sum && !split_point) {\n      break\n    }\n\n    if((index = all_opens.indexOf(parts[i])) !== -1) {\n      ++counts[index]\n      ++sum\n    } else if((index = all_closes.indexOf(parts[i])) !== -1) {\n      --counts[index]\n      --sum\n    }\n\n    for(var j = 0; j < counts.length; ++j) {\n      if(counts[j] < 0) {\n        throw new Error('Unmatched \"' + all_opens[j] + '\"\" in ' + parts)\n      }\n    }\n  }\n\n  if(sum || i === parts.length) {\n    return [parts]\n  }\n\n  var right = parts.slice(i + key.length)\n    , left = parts.slice(0, i)\n\n  if(!all) {\n    return [left, right]\n  }\n\n  return [left].concat(split(right, key, opens, closes, all))\n}\n",
    "var string_regexp = /^\\s*(?:'((?:[^'\\\\]|(?:\\\\.))*)'|\"((?:[^\"\\\\]|(?:\\\\.))*)\")\\s*$/\n  , number_regexp = /^\\s*(\\d*(?:\\.\\d+)?)\\s*$/\n\nmodule.exports = add_types\n\nfunction add_types(types) {\n  types.push(create_string_accessor)\n  types.push(create_number_accessor)\n}\n\nfunction create_string_accessor(parts, change) {\n  if(!(parts = parts.match(string_regexp))) {\n    return\n  }\n\n  return function() {\n    change(parts[1] || parts[2])\n  }\n}\n\nfunction create_number_accessor(parts, change) {\n  if(!(parts = parts.match(number_regexp))) {\n    return\n  }\n\n  return function() {\n    change(+parts[1])\n  }\n}\n",
    "module.exports = debounce\n\nfunction debounce(fn, delay, at_start, guarantee) {\n  var timeout\n    , args\n\n  return function() {\n    var self = this\n\n    args = Array.prototype.slice.call(arguments)\n\n    if(timeout && (at_start || guarantee)) {\n      return\n    } else if(!at_start) {\n      clear()\n\n      return timeout = setTimeout(run, delay)\n    }\n\n    timeout = setTimeout(clear, delay)\n    fn.apply(self, args)\n\n    function run() {\n      clear()\n      fn.apply(self, args)\n    }\n\n    function clear() {\n      clearTimeout(timeout)\n      timeout = null\n    }\n  }\n}\n"
  ],
  "sourceRoot": ""
}