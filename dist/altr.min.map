{
  "version": 3,
  "file": "bundle.js",
  "sources": [
    "/Users/michaelhayes/work/altr/lib/altr.js",
    "/Users/michaelhayes/work/altr/lib/batch.js",
    "/Users/michaelhayes/work/altr/lib/browser.js",
    "/Users/michaelhayes/work/altr/lib/element_node.js",
    "/Users/michaelhayes/work/altr/lib/filters/add.js",
    "/Users/michaelhayes/work/altr/lib/index.js",
    "/Users/michaelhayes/work/altr/lib/tags/for.js",
    "/Users/michaelhayes/work/altr/lib/tags/html.js",
    "/Users/michaelhayes/work/altr/lib/tags/if.js",
    "/Users/michaelhayes/work/altr/lib/tags/include.js",
    "/Users/michaelhayes/work/altr/lib/tags/text.js",
    "/Users/michaelhayes/work/altr/lib/tags/with.js",
    "/Users/michaelhayes/work/altr/lib/template_string.js",
    "/Users/michaelhayes/work/altr/lib/text_node.js",
    "/Users/michaelhayes/work/altr/node_modules/altr-accessors/index.js",
    "/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/create.js",
    "/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/filter.js",
    "/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/lookup.js",
    "/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/operators.js",
    "/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/parens.js",
    "/Users/michaelhayes/work/altr/node_modules/altr-accessors/lib/types.js",
    "/Users/michaelhayes/work/altr/node_modules/altr-accessors/node_modules/just-debounce/index.js"
  ],
  "names": [
    "global",
    "altr",
    "root",
    "data",
    "sync",
    "doc",
    "this",
    "batch",
    "document",
    "filters",
    "Object",
    "create",
    "includes",
    "accessors",
    "Buffer",
    "toString",
    "temp",
    "createElement",
    "innerHTML",
    "createDocumentFragment",
    "firstChild",
    "appendChild",
    "root_nodes",
    "nodeType",
    "slice",
    "call",
    "childNodes",
    "tree",
    "create_node",
    "update",
    "hooks",
    "forEach",
    "update_children",
    "i",
    "l",
    "children",
    "length",
    "node",
    "node_hanlers",
    "default_node",
    "add_filter",
    "name",
    "filter",
    "prototype",
    "add_tag",
    "attr",
    "tag",
    "tags",
    "tag_list",
    "push",
    "constructor",
    "outer_html",
    "outerHTML",
    "el",
    "add_children",
    "map",
    "bind",
    "Boolean",
    "append_to",
    "include",
    "template",
    "create_accessor",
    "description",
    "change",
    "fn",
    "template_string",
    "require",
    "element_node",
    "text_node",
    "module",
    "exports",
    "run_batch",
    "into",
    "self",
    "window",
    "jobs",
    "frame",
    "run",
    "add",
    "apply",
    "args",
    "index",
    "Array",
    "arguments",
    "request_frame",
    "requestAnimationFrame",
    "setTimeout",
    "create_element_node",
    "altr_tags",
    "attrs",
    "attributes",
    "value",
    "attr_hook",
    "val",
    "setAttribute",
    "accessor",
    "num",
    "check_num",
    "new_num",
    "new_val",
    "context",
    "include_tag",
    "text_tag",
    "html_tag",
    "with_tag",
    "for_tag",
    "if_tag",
    "for_handler",
    "new_items",
    "place",
    "nodes",
    "insertBefore",
    "prev",
    "isArray",
    "new_children",
    "offset",
    "items",
    "indexOf",
    "splice",
    "dom_nodes",
    "make_children",
    "nextSibling",
    "concat",
    "altr_nodes",
    "parentNode",
    "removeChild",
    "createElementNS",
    "namespaceURI",
    "parts",
    "match",
    "for_regexp",
    "Error",
    "prop",
    "key",
    "item_data",
    "html",
    "hide",
    "hidden",
    "parent",
    "show",
    "placeholder",
    "toggle",
    "createComment",
    "text",
    "textContent",
    "set_part",
    "idx",
    "join",
    "hook",
    "TAG",
    "next",
    "remaining",
    "create_text_node",
    "delay",
    "str",
    "create_part",
    "debounce",
    "add_operators",
    "create_accesor",
    "add_lookup",
    "add_parens",
    "add_types",
    "types",
    "call_next",
    "ctx",
    "split",
    "build_part",
    "part",
    "create_filter",
    "filter_regexp",
    "create_lookup",
    "path",
    "lookup",
    "done",
    "obj",
    "create_ternary",
    "binary",
    "unary",
    "list",
    "regex",
    "RegExp",
    "create_binary",
    "create_unary",
    "ok",
    "not",
    "ternary_regexp",
    "condition",
    "rest",
    "count",
    "on_data",
    "check_lhs",
    "check_rhs",
    "is_rhs",
    "rhs",
    "lhs",
    "changed",
    "Function",
    "create_parens",
    "parens_regexp",
    "body",
    "content",
    "Math",
    "random",
    "create_string_accessor",
    "create_number_accessor",
    "string_regexp",
    "number_regexp",
    "at_start",
    "guarantee",
    "timeout",
    "clear",
    "clearTimeout"
  ],
  "mappings": "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",
  "sourcesContent": [
    "(function (global){\nvar template_string = require('./template_string')\n  , element_node = require('./element_node')\n  , accessors = require('altr-accessors')\n  , text_node = require('./text_node')\n  , batch = require('./batch')\n\nmodule.exports = altr\naltr.add_tag = add_tag\naltr.include = include.bind(altr.prototype)\naltr.add_filter = add_filter.bind(altr.prototype)\n\nfunction altr(root, data, sync, doc) {\n  if(!(this instanceof altr)) {\n    return new altr(root, data, sync, doc)\n  }\n\n  this.root = root\n  this.sync = sync\n  this.batch = batch(sync)\n  this.document = doc || global.document\n  this.filters = Object.create(this.filters)\n  this.includes = Object.create(this.includes)\n  this.accessors = accessors(this.filters, false)\n\n  if(global.Buffer && root instanceof global.Buffer) {\n    root = root.toString()\n  }\n\n  if(typeof root === 'string') {\n    var temp = this.document.createElement('div')\n\n    temp.innerHTML = root\n    this.root = this.document.createDocumentFragment()\n\n    while(temp.firstChild) {\n      this.root.appendChild(temp.firstChild)\n    }\n  }\n\n  this.root_nodes = this.root.nodeType === 11 ?\n    [].slice.call(this.root.childNodes) : [this.root]\n\n  this.tree = this.create_node({childNodes: this.root_nodes})\n\n  if(data) {\n    this.update(data)\n  }\n}\n\naltr.prototype.template_string = template_string\naltr.prototype.create_accessor = create_accessor\naltr.prototype.update_children = update_children\naltr.prototype.create_node = create_node\naltr.prototype.add_filter = add_filter\naltr.prototype.toString = outer_html\naltr.prototype.run_batch = run_batch\naltr.prototype.include = include\naltr.prototype.into = append_to\naltr.prototype.update = update\n\naltr.prototype.includes = {}\naltr.prototype.tag_list = []\naltr.prototype.filters = {}\naltr.prototype.tags = {}\n\nvar node_hanlers = {}\n\nnode_hanlers[1] = element_node\nnode_hanlers[3] = text_node\n\nfunction update(data, root) {\n  root = root || this.tree\n\n  if(root.hooks) {\n    root.hooks.forEach(function(update) {\n      update(data)\n    })\n  }\n\n  if(root.update_children) {\n    root.update_children(data)\n  }\n}\n\nfunction update_children(data) {\n  for(var i = 0, l = this.children.length; i < l; ++i) {\n    update(data, this.children[i])\n  }\n}\n\nfunction create_node(node) {\n  return node_hanlers[node.nodeType] ?\n    node_hanlers[node.nodeType].call(this, node) :\n    default_node.call(this, node)\n}\n\nfunction add_filter(name, filter) {\n  altr.prototype.filters[name] = filter\n}\n\nfunction add_tag(attr, tag) {\n  altr.prototype.tags[attr] = tag\n  altr.prototype.tag_list.push({\n      attr: attr\n    , constructor: tag\n  })\n}\n\nfunction outer_html() {\n  return this.root.outerHTML\n}\n\nfunction default_node(el) {\n  return {\n      el: el\n    , update_children: this.update_children\n    , hooks: []\n    , children: add_children.call(this)\n  }\n\n  function add_children() {\n    return [].map.call(\n        el.childNodes || []\n      , this.create_node.bind(this)\n    ).filter(Boolean)\n  }\n}\n\nfunction append_to(node) {\n  for(var i = 0, l = this.root_nodes.length; i < l; ++i) {\n    node.appendChild(this.root_nodes[i])\n  }\n}\n\nfunction include(name, template) {\n  return this.includes[name] = template\n}\n\nfunction create_accessor(description, change) {\n  return this.accessors.create(description, change, false)\n}\n\nfunction add_filter(name, fn) {\n  return this.filters[name] = fn\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})",
    "(function (global){\nmodule.exports = batch\n\nfunction batch(sync) {\n  if(!(this instanceof batch)) {\n    return new batch(sync)\n  }\n\n  this.jobs = []\n  this.sync = sync\n  this.frame = null\n  this.run = this.run.bind(this)\n}\n\nbatch.prototype.request_frame = request_frame\nbatch.prototype.add = add\nbatch.prototype.run = run\n\nfunction add(fn) {\n  var index = this.jobs.length\n    , batch = this\n    , self\n    , args\n\n  batch.jobs[index] = null\n\n  return function() {\n    self = this\n    args = Array.prototype.slice.call(arguments)\n\n    if(batch.sync) {\n      return fn.apply(self, args)\n    }\n\n    batch.jobs[index] = call\n    batch.request_frame()\n  }\n\n  function call() {\n    fn.apply(self, args)\n  }\n}\n\nfunction run() {\n  this.frame = null\n\n  for(var i = 0, l = this.jobs.length; i < l; ++i) {\n    this.jobs[i] && this.jobs[i]()\n    this.jobs[i] = null\n  }\n}\n\nfunction request_frame() {\n  if(this.frame) {\n    return\n  }\n\n  if(!global.requestAnimationFrame) {\n    return this.frame = setTimeout(this.run, 0)\n  }\n\n  this.frame = requestAnimationFrame(this.run)\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})",
    "(function (global){\nmodule.exports = global.altr = require('./index')\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})",
    "module.exports = create_element_node\n\nfunction create_element_node(el) {\n  var altr_tags = {}\n    , altr = this\n    , attr\n\n  var node = {\n      el: el\n    , update_children: this.update_children\n    , hooks: []\n  }\n\n  var attrs = Array.prototype.filter.call(el.attributes, function(attr) {\n    return altr.tags[attr.name] ?\n      (altr_tags[attr.name] = attr.value) && false :\n      true\n  })\n\n  attrs.forEach(function(attr) {\n    var attr_hook = altr.template_string(attr.value, function(val) {\n      el.setAttribute(attr.name, val)\n    })\n\n    if(attr_hook) {\n      node.hooks.push(altr.batch.add(attr_hook))\n    }\n  })\n\n  for(var i = 0, l = altr.tag_list.length; i < l; ++i) {\n    attr = altr_tags[altr.tag_list[i].attr]\n\n    if(attr) {\n      altr.tag_list[i].constructor.call(altr, node, attr)\n    }\n  }\n\n  node.children = [].map.call(\n      el.childNodes\n    , altr.create_node.bind(altr)\n  ).filter(Boolean)\n\n  if(node.children.length || node.hooks.length) {\n    return node\n  }\n}\n",
    "module.exports = function(accessor, change) {\n  var val, num\n\n  var check_num = this.create_accessor(accessor, function(new_num) {\n    change((num = +new_num) + (val || 0))\n  })\n\n  return function add(new_val, context) {\n    val = +new_val\n    check_num(context)\n  }\n}\n",
    "var include_tag = require('./tags/include')\n  , add_filter = require('./filters/add')\n  , text_tag = require('./tags/text')\n  , html_tag = require('./tags/html')\n  , with_tag = require('./tags/with')\n  , for_tag = require('./tags/for')\n  , if_tag = require('./tags/if')\n  , altr = require('./altr')\n\nmodule.exports = altr\n\naltr.add_tag('altr-include', include_tag)\naltr.add_tag('altr-text', text_tag)\naltr.add_tag('altr-html', html_tag)\naltr.add_tag('altr-with', with_tag)\naltr.add_tag('altr-for', for_tag)\naltr.add_tag('altr-if', if_tag)\n\naltr.add_filter('add', add_filter)\n",
    "var for_regexp = /^(.*?)\\s+in\\s+(.*$)/\n\nmodule.exports = for_handler\n\nfunction for_handler(node, args) {\n  var parts = args.match(for_regexp)\n    , template = node.el.innerHTML\n    , children = []\n    , altr = this\n    , items = []\n\n  if(!parts) {\n    throw new Error('invalid for tag: ' + args)\n  }\n\n  node.el.innerHTML = ''\n\n  var prop = parts[1]\n    , key = parts[2]\n\n  node.hooks.push(altr.create_accessor(key, altr.batch.add(update)))\n\n  node.update_children = function(data) {\n    var item_data\n\n    for(var i = 0, l = node.children.length; i < l; ++i) {\n      item_data = Object.create(data)\n      item_data[prop] = data[key][i]\n      item_data['$index'] = i\n      altr.update(item_data, node.children[i])\n    }\n  }\n\n  function update(new_items) {\n    if(!Array.isArray(new_items)) {\n      new_items = []\n    }\n\n    var new_children = new Array(new_items.length)\n      , prev = node.el.firstChild\n      , offset = 0\n      , index\n      , nodes\n\n    node.children = []\n\n    for(var i = 0, l = new_items.length; i < l; ++i) {\n      index = items.indexOf(new_items[i])\n\n      if(index !== -1) {\n        new_children[i] = (children.splice(index, 1)[0])\n        items.splice(index, 1)\n\n        if(index + offset !== i) {\n          place(new_children[i].dom_nodes)\n        }\n\n        ++offset\n      } else {\n        new_children[i] = make_children()\n        place(new_children[i].dom_nodes)\n        ++offset\n      }\n\n      nodes = new_children[i].dom_nodes\n      prev = nodes.length ? nodes[nodes.length - 1].nextSibling : null\n      nodes = nodes.concat(new_children[i].dom_nodes)\n      node.children = node.children.concat(new_children[i].altr_nodes)\n    }\n\n    for(var i = 0, l = children.length; i < l; ++i) {\n      children[i].dom_nodes.forEach(function(node) {\n        node.parentNode.removeChild(node)\n      })\n    }\n\n    children = new_children.slice()\n    items = new_items.slice()\n\n    function place(nodes) {\n      for(var i = 0, l = nodes.length; i < l; ++i) {\n        node.el.insertBefore(nodes[i], prev)\n      }\n    }\n  }\n\n  function make_children() {\n    var temp = altr.document.createElementNS(node.el.namespaceURI, 'div')\n      , altr_nodes\n      , dom_nodes\n\n    temp.innerHTML = template\n\n    dom_nodes = Array.prototype.slice.call(temp.childNodes)\n    altr_nodes = dom_nodes.map(altr.create_node.bind(altr)).filter(Boolean)\n\n    return {\n        dom_nodes: dom_nodes\n      , altr_nodes: altr_nodes\n    }\n  }\n}\n",
    "module.exports = html\n\nfunction html(node, accessor) {\n  node.hooks.push(this.batch.add(this.create_accessor(accessor, update)))\n\n  function update(val) {\n    node.el.innerHTML = typeof val === 'undefined' ? '' : val\n  }\n}\n",
    "module.exports = if_tag\n\nfunction if_tag(node, accessor) {\n  var placeholder = this.document.createComment('altr-if-placeholder')\n    , parent = node.el.parentNode\n    , hidden = null\n\n  parent.insertBefore(placeholder, node.el.nextSibling)\n  node.hooks.push(this.batch.add(this.create_accessor(accessor, toggle)))\n\n  function hide() {\n    if(!hidden) {\n      hidden = node.children || []\n      node.children = []\n      parent.removeChild(node.el)\n    }\n  }\n\n  function show() {\n    if(hidden) {\n      parent.insertBefore(node.el, placeholder)\n      node.children = hidden\n      hidden = null\n    }\n  }\n\n  function toggle(val) {\n    val ? show() : hide()\n  }\n}\n",
    "module.exports = include\n\nfunction include(node, name) {\n  node.el.innerHTML = this.includes[name]\n}\n",
    "module.exports = text\n\nfunction text(node, accessor) {\n  node.hooks.push(this.batch.add(this.create_accessor(accessor, update)))\n\n  function update(val) {\n    node.el.textContent = typeof val === 'undefined' ? '' : val\n  }\n}\n",
    "module.exports = with_tag\n\nfunction with_tag(node, accessor) {\n  node.update_children = this.create_accessor(\n      accessor\n    , node.update_children.bind(node)\n  )\n}\n",
    "var TAG = /{{\\s*(.*?)\\s*}}/\n\nmodule.exports = template_string\n\nfunction template_string(template, change) {\n  if(!template.match(TAG)) {\n    return\n  }\n\n  var remaining = template\n    , parts = []\n    , hooks = []\n    , timer\n    , index\n    , next\n\n  while(remaining && (next = remaining.match(TAG))) {\n    if(index = remaining.indexOf(next[0])) {\n      parts.push(remaining.slice(0, index))\n    }\n\n    parts.push('')\n    remaining = remaining.slice(index + next[0].length)\n    hooks.push(\n        this.create_accessor(next[1], set_part.bind(this, parts.length - 1))\n    )\n  }\n\n  return update\n\n  function set_part(idx, val) {\n    parts[idx] = val\n    change(parts.join(''))\n  }\n\n  function update(data) {\n    hooks.forEach(function(hook) {\n      hook(data)\n    })\n  }\n}\n",
    "module.exports = create_text_node\n\nfunction create_text_node(el) {\n  var hook = this.template_string(el.textContent, update)\n\n  if(!hook) {\n    return\n  }\n\n  hook = this.batch.add(hook)\n\n  return {\n      el: el\n    , text: el.textContent\n    , hooks: [hook]\n  }\n\n  function update(val) {\n    el.textContent = val\n  }\n}\n",
    "var add_operators = require('./lib/operators')\n  , create_accesor = require('./lib/create')\n  , add_lookup = require('./lib/lookup')\n  , add_filter = require('./lib/filter')\n  , add_parens = require('./lib/parens')\n  , debounce = require('just-debounce')\n  , add_types = require('./lib/types')\n  , types = []\n\nmodule.exports = accessors\n\n// order is important\nadd_types(types)\nadd_parens(types)\nadd_operators(types)\nadd_filter(types)\nadd_lookup(types)\n\naccessors.prototype.create_part = create_accesor\naccessors.prototype.add_filter = add_filter\naccessors.prototype.create = create\naccessors.prototype.types = types\n\nfunction accessors(filters, delay) {\n  if(!(this instanceof accessors)) {\n    return new accessors(filters, delay)\n  }\n\n  if(!delay && delay !== false) {\n    delay = 0\n  }\n\n  this.delay = delay\n  this.filters = filters || {}\n}\n\nfunction add_filter(name, fn) {\n  this.filters[name] = fn\n}\n\nfunction create(str, change) {\n  return this.create_part(\n      str\n    , this.delay === false ? change : debounce(change, this.delay, false, true)\n  )\n}\n",
    "module.exports = accessor\n\nfunction accessor(key, change) {\n  var parts = key.split('->')\n    , context\n    , next\n    , prev\n\n  for(var i = 0, l = parts.length; i < l; ++i) {\n    parts[i] = build_part.call(this, parts[i], call_next.bind(this, i + 1))\n  }\n\n  return call_next.bind(this, 0)\n\n  function call_next(i, val, ctx) {\n    if(!i) {\n      context = ctx || val\n    }\n\n    if(i === parts.length) {\n      return change.call(this, val, context)\n    }\n\n    parts[i](val, context)\n  }\n\n  function finish(val, context) {\n    if(val === prev) {\n      return\n    }\n\n    prev = val\n    change.call(this, val, context)\n  }\n}\n\nfunction build_part(part, change) {\n  var accessor\n\n  for(var i = 0, l = this.types.length; i < l; ++i) {\n    if(accessor = this.types[i].call(this, part, change)) {\n      return accessor\n    }\n  }\n}\n",
    "var filter_regexp = /^\\s*([^\\s(]+)\\((.*)\\)\\s*$/\n\nmodule.exports = add_filter\n\nfunction add_filter(types) {\n  types.push(create_filter)\n}\n\nfunction create_filter(parts, change) {\n  if(!(parts = parts.match(filter_regexp))) {\n    return\n  }\n\n  var filter = this.filters[parts[1]]\n\n  if(!filter) {\n    throw new Error('could not find filter: ' + parts[1])\n  }\n\n  return filter.call(this, parts[2], change)\n}\n",
    "module.exports = add_lookup\n\nfunction add_lookup(types) {\n  types.push(create_lookup)\n}\n\nfunction create_lookup(path, change) {\n  if(!path.indexOf('$data')) {\n    path = path.slice('$data.'.length)\n  }\n\n  return lookup(path.match(/\\s*(.*[^\\s])\\s*/)[1], change)\n}\n\nfunction lookup(path, done) {\n  var parts = path ? path.split('.') : []\n\n  return function(obj) {\n    for(var i = 0, l = parts.length; obj && i < l; ++i) {\n      obj = obj[parts[i]]\n    }\n\n    if(i === l) {\n      return done(obj)\n    }\n\n    done()\n  }\n}\n",
    "var ternary_regexp = /^\\s*(.+?)\\s*\\?(.*)\\s*$/\n\nmodule.exports = add_operators\n\nfunction add_operators(types) {\n  types.push(create_ternary)\n  types.push(binary(['|\\\\|']))\n  types.push(binary(['&&']))\n  types.push(binary(['|']))\n  types.push(binary(['^']))\n  types.push(binary(['&']))\n  types.push(binary(['===', '!==', '==', '!=']))\n  types.push(binary(['>=', '<=', '>', '<', ' in ', ' instanceof ']))\n  // types.push(binary(['<<', '>>', '>>>'])) //conflics with < and >\n  types.push(binary(['+', '-']))\n  types.push(binary(['*', '/', '%']))\n  types.push(unary(['!', '+', '-', '~']))\n}\n\nfunction binary(list) {\n  var regex = new RegExp(\n      '^\\\\s*(.+?)\\\\s\\*(\\\\' +\n      list.join('|\\\\') +\n      ')\\\\s*(.+?)\\\\s*$'\n  )\n\n  return function(parts, change) {\n    return create_binary.call(this, regex, parts, change)\n  }\n}\n\nfunction unary(list) {\n  var regex = new RegExp(\n      '^\\\\s*(\\\\' +\n      list.join('|\\\\') +\n      ')\\\\s*(.+?)\\\\s*$'\n  )\n\n  return function(parts, change) {\n    return create_unary.call(this, regex, parts, change)\n  }\n}\n\nfunction create_ternary(parts, change) {\n  if(!(parts = parts.match(ternary_regexp))) {\n    return\n  }\n\n  var condition = parts[1]\n    , rest = parts[2]\n    , count = 1\n\n  for(var i = 0, l = rest.length; i < l; ++i) {\n    if(rest[i] === ':') {\n      --count\n    } else if(rest[i] === '?') {\n      ++count\n    }\n\n    if(!count) {\n      break\n    }\n  }\n\n  if(!i || i === rest.length) {\n    throw new Error('Unmatched ternary: ' + parts[0])\n  }\n\n  var not = this.create_part(rest.slice(i + 1), change)\n    , ok = this.create_part(rest.slice(0, i), change)\n\n  return this.create_part(condition, update)\n\n  function update(val, context) {\n    return val ? ok(context) : not(context)\n  }\n}\n\nfunction create_binary(regex, parts, change) {\n  if(!(parts = parts.match(regex))) {\n    return\n  }\n\n  var check_lhs = this.create_part(parts[1], update.bind(null, false))\n    , check_rhs = this.create_part(parts[3], update.bind(null, true))\n    , lhs\n    , rhs\n\n  var changed = Function(\n      'change, lhs, rhs'\n    , 'return change(lhs ' + parts[2] + ' rhs)'\n  ).bind(null, change)\n\n  return on_data\n\n  function on_data(data) {\n    check_lhs(data)\n    check_rhs(data)\n  }\n\n  function update(is_rhs, val) {\n    is_rhs ? rhs = val : lhs = val\n    changed(lhs, rhs)\n  }\n}\n\nfunction create_unary(regex, parts, change) {\n  if(!(parts = parts.match(regex))) {\n    return\n  }\n\n  var changed = Function(\n      'change, val'\n    , 'return change(' + parts[1] + 'val)'\n  ).bind(null, change)\n\n  return this.create_part(parts[2], changed)\n}\n",
    "var parens_regexp = /^\\s*\\((.*)$/\n\nmodule.exports = add_parens\n\nfunction add_parens(types) {\n  types.push(create_parens)\n}\n\nfunction create_parens(parts, change) {\n  if(!(parts = parts.match(parens_regexp))) {\n    return\n  }\n\n  var body = parts[1]\n    , count = 1\n\n  for(var i = 0, l = body.length; i < l; ++i) {\n    if(body[i] === ')') {\n      --count\n    } else if(body[i] === '(') {\n      ++count\n    }\n\n    if(!count) {\n      break\n    }\n  }\n\n  if(!i || i === l) {\n    throw new Error('Unmatched ternary: ' + parts[0])\n  }\n\n  var content =  this.create_part(body.slice(0, i), update)\n    , key = 'paren_' + Math.random().toString(16).slice(2)\n\n  var template = this.create_part(key + body.slice(i + 1), change)\n\n  return content\n\n  function update(val, context) {\n    context = Object.create(context)\n    context[key] = val\n    template(context)\n  }\n}\n",
    "var string_regexp = /^\\s*(?:'((?:[^'\\\\]|(?:\\\\.))*)'|\"((?:[^\"\\\\]|(?:\\\\.))*)\")\\s*$/\n  , number_regexp = /^\\s*(\\d*(?:\\.\\d+)?)\\s*$/\n\nmodule.exports = add_types\n\nfunction add_types(types) {\n  types.push(create_string_accessor)\n  types.push(create_number_accessor)\n}\n\nfunction create_string_accessor(parts, change) {\n  if(!(parts = parts.match(string_regexp))) {\n    return\n  }\n\n  return function() {\n    change(parts[1] || parts[2])\n  }\n}\n\nfunction create_number_accessor(parts, change) {\n  if(!(parts = parts.match(number_regexp))) {\n    return\n  }\n\n  return function() {\n    change(+parts[1])\n  }\n}\n",
    "module.exports = debounce\n\nfunction debounce(fn, delay, at_start, guarantee) {\n  var timeout\n    , args\n\n  return function() {\n    var self = this\n\n    args = Array.prototype.slice.call(arguments)\n\n    if(timeout && (at_start || guarantee)) {\n      return\n    } else if(!at_start) {\n      clear()\n\n      return timeout = setTimeout(run, delay)\n    }\n\n    timeout = setTimeout(clear, delay)\n    fn.apply(self, args)\n\n    function run() {\n      clear()\n      fn.apply(self, args)\n    }\n\n    function clear() {\n      clearTimeout(timeout)\n      timeout = null\n    }\n  }\n}\n"
  ],
  "sourceRoot": ""
}