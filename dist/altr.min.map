{
  "version": 3,
  "file": "bundle.js",
  "sources": [
    "/Users/michaelhayes/work/altr/lib/accessor.js",
    "/Users/michaelhayes/work/altr/lib/altr.js",
    "/Users/michaelhayes/work/altr/lib/browser.js",
    "/Users/michaelhayes/work/altr/lib/element_node.js",
    "/Users/michaelhayes/work/altr/lib/filters/add.js",
    "/Users/michaelhayes/work/altr/lib/index.js",
    "/Users/michaelhayes/work/altr/lib/lookup.js",
    "/Users/michaelhayes/work/altr/lib/tags/for.js",
    "/Users/michaelhayes/work/altr/lib/tags/html.js",
    "/Users/michaelhayes/work/altr/lib/tags/if.js",
    "/Users/michaelhayes/work/altr/lib/tags/include.js",
    "/Users/michaelhayes/work/altr/lib/tags/text.js",
    "/Users/michaelhayes/work/altr/lib/tags/with.js",
    "/Users/michaelhayes/work/altr/lib/template_string.js",
    "/Users/michaelhayes/work/altr/lib/text_node.js"
  ],
  "names": [
    "add_type",
    "regexp",
    "fn",
    "accessor_types",
    "push",
    "test",
    "RegExp",
    "prototype",
    "bind",
    "create",
    "accessor",
    "key",
    "change",
    "call_next",
    "i",
    "val",
    "ctx",
    "context",
    "parts",
    "length",
    "call",
    "this",
    "split",
    "l",
    "build_part",
    "part",
    "create_lookup",
    "path",
    "indexOf",
    "slice",
    "lookup",
    "match",
    "create_filter",
    "filter_name",
    "filter_regexp",
    "filter",
    "filters",
    "Error",
    "create_string_accessor",
    "string",
    "string_regexp",
    "create_number_accessor",
    "num",
    "number_regexp",
    "create_ternary",
    "update",
    "ok",
    "not",
    "ternary_regexp",
    "create_equals",
    "compare",
    "data",
    "check_lhs",
    "check_rhs",
    "is_rhs",
    "rhs",
    "lhs",
    "equals_regexp",
    "create_not",
    "accesor",
    "not_regexp",
    "create_and_or",
    "and_or_regexp",
    "require",
    "module",
    "exports",
    "global",
    "altr",
    "root",
    "doc",
    "sync",
    "document",
    "includes",
    "Object",
    "Buffer",
    "toString",
    "temp",
    "createElement",
    "innerHTML",
    "createDocumentFragment",
    "firstChild",
    "appendChild",
    "root_nodes",
    "nodeType",
    "childNodes",
    "tree",
    "create_node",
    "hooks",
    "forEach",
    "update_children",
    "children",
    "node",
    "node_hanlers",
    "default_node",
    "add_filter",
    "name",
    "add_tag",
    "attr",
    "tag",
    "tags",
    "tag_list",
    "constructor",
    "outer_html",
    "outerHTML",
    "el",
    "add_children",
    "map",
    "Boolean",
    "append_to",
    "include",
    "template",
    "template_string",
    "element_node",
    "create_accessor",
    "text_node",
    "into",
    "self",
    "window",
    "create_element_node",
    "altr_tags",
    "attrs",
    "Array",
    "attributes",
    "value",
    "attr_hook",
    "setAttribute",
    "check_num",
    "new_num",
    "new_val",
    "include_tag",
    "text_tag",
    "html_tag",
    "with_tag",
    "for_tag",
    "if_tag",
    "done",
    "obj",
    "for_handler",
    "args",
    "new_items",
    "place",
    "nodes",
    "insertBefore",
    "prev",
    "isArray",
    "index",
    "new_children",
    "offset",
    "items",
    "splice",
    "dom_nodes",
    "make_children",
    "nextSibling",
    "concat",
    "altr_nodes",
    "parentNode",
    "removeChild",
    "createElementNS",
    "namespaceURI",
    "for_regexp",
    "prop",
    "item_data",
    "html",
    "hide",
    "hidden",
    "parent",
    "show",
    "placeholder",
    "toggle",
    "createComment",
    "text",
    "textContent",
    "set_part",
    "idx",
    "join",
    "clearTimeout",
    "timer",
    "setTimeout",
    "hook",
    "TAG",
    "next",
    "remaining",
    "create_text_node"
  ],
  "mappings": "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",
  "sourcesContent": [
    "var lookup = require('./lookup')\n  , accessor_types = []\n\nvar string_regexp = /^\\s*(?:'((?:[^'\\\\]|(?:\\\\.))*)'|\"((?:[^\"\\\\]|(?:\\\\.))*)\")\\s*/\n  , ternary_regexp = /^\\s*([^\\?]+)\\?([^\\?:]+):(.*)\\s*$/\n  , equals_regexp = /^\\s*(.+?)((?:!|=)={1,2})(.*)\\s*$/\n  , and_or_regexp = /^\\s*(.+?)\\s*(&&|\\|\\|)\\s*(.+)\\s*$/\n  , filter_regexp = /^\\s*([^(]+)\\((.*)\\)\\s*$/\n  , number_regexp = /^\\s*(\\d*(?:\\.\\d+)?)\\s*$/\n  , not_regexp = /^\\s*!(.+?)\\s*$/\n\nmodule.exports = accessor\n\nadd_type(ternary_regexp, create_ternary)\nadd_type(equals_regexp, create_equals)\nadd_type(and_or_regexp, create_and_or)\nadd_type(not_regexp, create_not)\nadd_type(filter_regexp, create_filter)\nadd_type(string_regexp, create_string_accessor)\nadd_type(number_regexp, create_number_accessor)\nadd_type(/.*/, create_lookup)\n\nfunction add_type(regexp, fn) {\n  accessor_types.push({test: RegExp.prototype.test.bind(regexp), create: fn})\n}\n\nfunction accessor(key, change) {\n  var parts = key.split('|')\n    , context\n    , next\n    , prev\n\n  for(var i = 0, l = parts.length; i < l; ++i) {\n    parts[i] = build_part.call(this, parts[i], call_next.bind(this, i + 1))\n  }\n\n  return call_next.bind(this, 0)\n\n  function call_next(i, val, ctx) {\n    if(!i) {\n      context = ctx || val\n    }\n\n    if(i === parts.length) {\n      return change.call(this, val, context)\n    }\n\n    parts[i](val, context)\n  }\n\n  function finish(val, context) {\n    if(val === prev) {\n      return\n    }\n\n    prev = val\n    change.call(this, val, context)\n  }\n}\n\nfunction build_part(part, change) {\n  for(var i = 0, l = accessor_types.length; i < l; ++i) {\n    if(accessor_types[i].test(part)) {\n      return accessor_types[i].create.call(this, part, change)\n    }\n  }\n}\n\nfunction create_lookup(path, change) {\n  if(!path.indexOf('$data')) {\n    path = path.slice('$data.'.length)\n  }\n\n  return lookup(path.match(/\\s*(.*[^\\s])\\s*/)[1], change)\n}\n\nfunction create_filter(filter_name, change) {\n  var parts = filter_name.match(filter_regexp)\n    , filter = this.filters[parts[1]]\n\n  if(!filter) {\n    throw new Error('could not find filter: ' + parts[1])\n  }\n\n  return filter.call(this, parts[2], change)\n}\n\nfunction create_string_accessor(string, change) {\n  var match = string.match(string_regexp)\n\n  string = match[1] || match[2]\n\n  return function() {\n    change(string)\n  }\n}\n\nfunction create_number_accessor(num, change) {\n  var match = num.match(number_regexp)\n\n  num = +match[1]\n\n  return function() {\n    change(num)\n  }\n}\n\nfunction create_ternary(parts, change) {\n  parts = parts.match(ternary_regexp)\n\n  var not = accessor(parts[3], change)\n    , ok = accessor(parts[2], change)\n\n  return accessor(parts[1], update)\n\n  function update(val, context) {\n    val ? ok(context) : not(context)\n  }\n}\n\nfunction create_equals(parts, change) {\n  parts = parts.match(equals_regexp)\n\n  var check_lhs = accessor(parts[1], update.bind(null, false))\n    , check_rhs = accessor(parts[3], update.bind(null, true))\n    , lhs = {}\n    , rhs = {}\n\n  return compare\n\n  function compare(data) {\n    check_lhs(data)\n    check_rhs(data)\n  }\n\n  function update(is_rhs, val) {\n    is_rhs ? rhs = val : lhs = val\n    val = parts[2].length === 2 ? lhs == rhs : lhs === rhs\n    change(parts[2][0] === '!' ? !val : val)\n  }\n}\n\nfunction create_not(parts, change) {\n  return accesor(parts.match(not_regexp)[1], update)\n\n  function update(data) {\n    change(!data)\n  }\n}\n\nfunction create_and_or(parts, change) {\n   parts = parts.match(and_or_regexp)\n\n  var check_lhs = accessor(parts[1], update.bind(null, false))\n    , check_rhs = accessor(parts[3], update.bind(null, true))\n    , lhs = false\n    , rhs = false\n\n  return compare\n\n  function compare(data) {\n    check_lhs(data)\n    check_rhs(data)\n  }\n\n  function update(is_rhs, val) {\n    is_rhs ? rhs = val : lhs = val\n    change(parts[2] === '&&' ? lhs && rhs : lhs || rhs)\n  }\n}\n",
    "(function (global){\nvar template_string = require('./template_string')\n  , element_node = require('./element_node')\n  , create_accessor = require('./accessor')\n  , text_node = require('./text_node')\n\nmodule.exports = altr\naltr.add_tag = add_tag\naltr.add_filter = add_filter\n\nfunction altr(root, data, doc, sync) {\n  if(!(this instanceof altr)) {\n    return new altr(root, data, doc, sync)\n  }\n\n  this.root = root\n  this.sync = sync\n  this.document = doc || global.document\n  this.includes = Object.create(this.includes)\n\n  if(global.Buffer && root instanceof global.Buffer) {\n    root = root.toString()\n  }\n\n  if(typeof root === 'string') {\n    var temp = this.document.createElement('div')\n\n    temp.innerHTML = root\n    this.root = this.document.createDocumentFragment()\n\n    while(temp.firstChild) {\n      this.root.appendChild(temp.firstChild)\n    }\n  }\n\n  this.root_nodes = this.root.nodeType === 11 ?\n    [].slice.call(this.root.childNodes) : [this.root]\n\n  this.tree = this.create_node({childNodes: this.root_nodes})\n\n  if(data) {\n    this.update(data)\n  }\n}\n\naltr.prototype.template_string = template_string\naltr.prototype.create_accessor = create_accessor\naltr.prototype.update_children = update_children\naltr.prototype.create_node = create_node\naltr.prototype.toString = outer_html\naltr.prototype.include = include\naltr.prototype.into = append_to\naltr.prototype.update = update\n\naltr.prototype.includes = {}\naltr.prototype.tag_list = []\naltr.prototype.filters = {}\naltr.prototype.tags = {}\n\naltr.include = include.bind(altr.prototype)\n\nvar node_hanlers = {}\n\nnode_hanlers[1] = element_node\nnode_hanlers[3] = text_node\n\nfunction update(data, root) {\n  root = root || this.tree\n\n  if(root.hooks) {\n    root.hooks.forEach(function(update) {\n      update(data)\n    })\n  }\n\n  if(root.update_children) {\n    root.update_children(data)\n  }\n}\n\nfunction update_children(data) {\n  for(var i = 0, l = this.children.length; i < l; ++i) {\n    update(data, this.children[i])\n  }\n}\n\nfunction create_node(node) {\n  return node_hanlers[node.nodeType] ?\n    node_hanlers[node.nodeType].call(this, node) :\n    default_node.call(this, node)\n}\n\nfunction add_filter(name, filter) {\n  altr.prototype.filters[name] = filter\n}\n\nfunction add_tag(attr, tag) {\n  altr.prototype.tags[attr] = tag\n  altr.prototype.tag_list.push({\n      attr: attr\n    , constructor: tag\n  })\n}\n\nfunction outer_html() {\n  return this.root.outerHTML\n}\n\nfunction default_node(el) {\n  return {\n      el: el\n    , update_children: this.update_children\n    , hooks: []\n    , children: add_children.call(this)\n  }\n\n  function add_children() {\n    return [].map.call(\n        el.childNodes || []\n      , this.create_node.bind(this)\n    ).filter(Boolean)\n  }\n}\n\nfunction append_to(node) {\n  for(var i = 0, l = this.root_nodes.length; i < l; ++i) {\n    node.appendChild(this.root_nodes[i])\n  }\n}\n\nfunction include(name, template) {\n  return this.includes[name] = template\n}\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})",
    "(function (global){\nmodule.exports = global.altr = require('./index')\n\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})",
    "module.exports = create_element_node\n\nfunction create_element_node(el) {\n  var altr_tags = {}\n    , altr = this\n    , attr\n\n  var node = {\n      el: el\n    , update_children: this.update_children\n    , hooks: []\n  }\n\n  var attrs = Array.prototype.filter.call(el.attributes, function(attr) {\n    return altr.tags[attr.name] ?\n      (altr_tags[attr.name] = attr.value) && false :\n      true\n  })\n\n  attrs.forEach(function(attr) {\n    var attr_hook = altr.template_string(attr.value, function(val) {\n      el.setAttribute(attr.name, val)\n    })\n\n    if(attr_hook) {\n      node.hooks.push(attr_hook)\n    }\n  })\n\n  for(var i = 0, l = altr.tag_list.length; i < l; ++i) {\n    attr = altr_tags[altr.tag_list[i].attr]\n\n    if(attr) {\n      altr.tag_list[i].constructor.call(altr, node, attr)\n    }\n  }\n\n  node.children = [].map.call(\n      el.childNodes\n    , altr.create_node.bind(altr)\n  ).filter(Boolean)\n\n  if(node.children.length || node.hooks.length) {\n    return node\n  }\n}\n",
    "module.exports = function(accessor, change) {\n  var val, num\n\n  var check_num = this.create_accessor(accessor, function(new_num) {\n    change((num = +new_num) + (val || 0))\n  })\n\n  return function add(new_val, context) {\n    val = +new_val\n    check_num(context)\n  }\n}\n",
    "var include_tag = require('./tags/include')\n  , add_filter = require('./filters/add')\n  , text_tag = require('./tags/text')\n  , html_tag = require('./tags/html')\n  , with_tag = require('./tags/with')\n  , for_tag = require('./tags/for')\n  , if_tag = require('./tags/if')\n  , altr = require('./altr')\n\nmodule.exports = altr\n\naltr.add_tag('altr-include', include_tag)\naltr.add_tag('altr-text', text_tag)\naltr.add_tag('altr-html', html_tag)\naltr.add_tag('altr-with', with_tag)\naltr.add_tag('altr-for', for_tag)\naltr.add_tag('altr-if', if_tag)\n\naltr.add_filter('add', add_filter)\n",
    "module.exports = lookup\n\nfunction lookup(path, done) {\n  var parts = path ? path.split('.') : []\n\n  return function(obj) {\n    for(var i = 0, l = parts.length; obj && i < l; ++i) {\n      obj = obj[parts[i]]\n    }\n\n    if(i === l) {\n      return done(obj)\n    }\n\n    done()\n  }\n}\n",
    "var for_regexp = /^(.*?)\\s+in\\s+(.*$)/\n\nmodule.exports = for_handler\n\nfunction for_handler(node, args) {\n  var parts = args.match(for_regexp)\n    , template = node.el.innerHTML\n    , children = []\n    , altr = this\n    , items = []\n\n  if(!parts) {\n    throw new Error('invalid for tag: ' + args)\n  }\n\n  node.el.innerHTML = ''\n\n  var prop = parts[1]\n    , key = parts[2]\n\n  node.hooks.push(altr.create_accessor(key, update))\n\n  node.update_children = function(data) {\n    var item_data\n\n    for(var i = 0, l = node.children.length; i < l; ++i) {\n      item_data = Object.create(data)\n      item_data[prop] = data[key][i]\n      item_data['$index'] = i\n      altr.update(item_data, node.children[i])\n    }\n  }\n\n  function update(new_items) {\n    if(!Array.isArray(new_items)) {\n      new_items = []\n    }\n\n    var new_children = new Array(new_items.length)\n      , prev = node.el.firstChild\n      , offset = 0\n      , index\n      , nodes\n\n    node.children = []\n\n    for(var i = 0, l = new_items.length; i < l; ++i) {\n      index = items.indexOf(new_items[i])\n\n      if(index !== -1) {\n        new_children[i] = (children.splice(index, 1)[0])\n        items.splice(index, 1)\n\n        if(index + offset !== i) {\n          place(new_children[i].dom_nodes)\n        }\n\n        ++offset\n      } else {\n        new_children[i] = make_children()\n        place(new_children[i].dom_nodes)\n        ++offset\n      }\n\n      nodes = new_children[i].dom_nodes\n      prev = nodes[nodes.length - 1].nextSibling\n      nodes = nodes.concat(new_children[i].dom_nodes)\n      node.children = node.children.concat(new_children[i].altr_nodes)\n    }\n\n    for(var i = 0, l = children.length; i < l; ++i) {\n      children[i].dom_nodes.forEach(function(node) {\n        node.parentNode.removeChild(node)\n      })\n    }\n\n    children = new_children.slice()\n    items = new_items.slice()\n\n    function place(nodes) {\n      for(var i = 0, l = nodes.length; i < l; ++i) {\n        node.el.insertBefore(nodes[i], prev)\n      }\n    }\n  }\n\n  function make_children() {\n    var temp = altr.document.createElementNS(node.el.namespaceURI, 'div')\n      , altr_nodes\n      , dom_nodes\n\n    temp.innerHTML = template\n\n    dom_nodes = Array.prototype.slice.call(temp.childNodes)\n    altr_nodes = dom_nodes.map(altr.create_node.bind(altr)).filter(Boolean)\n\n    return {\n        dom_nodes: dom_nodes\n      , altr_nodes: altr_nodes\n    }\n  }\n}\n",
    "module.exports = html\n\nfunction html(node, accessor) {\n  node.hooks.push(this.create_accessor(accessor, update))\n\n  function update(val) {\n    node.el.innerHTML = typeof val === 'undefined' ? '' : val\n  }\n}\n",
    "module.exports = if_tag\n\nfunction if_tag(node, accessor) {\n  var placeholder = this.document.createComment('altr-if-placeholder')\n    , parent = node.el.parentNode\n    , hidden = null\n\n  parent.insertBefore(placeholder, node.el)\n  node.hooks.push(this.create_accessor(accessor, toggle))\n\n  function hide() {\n    if(!hidden) {\n      hidden = node.children || []\n      node.children = []\n      parent.removeChild(node.el)\n    }\n  }\n\n  function show() {\n    if(hidden) {\n      parent.insertBefore(node.el, placeholder)\n      node.children = hidden\n      hidden = null\n    }\n  }\n\n  function toggle(val) {\n    val ? show() : hide()\n  }\n}\n",
    "module.exports = include\n\nfunction include(node, name) {\n  node.el.innerHTML = this.includes[name]\n}\n",
    "module.exports = text\n\nfunction text(node, accessor) {\n  node.hooks.push(this.create_accessor(accessor, update))\n\n  function update(val) {\n    node.el.textContent = typeof val === 'undefined' ? '' : val\n  }\n}\n",
    "module.exports = with_tag\n\nfunction with_tag(node, accessor) {\n  node.update_children = this.create_accessor(\n      accessor\n    , node.update_children.bind(node)\n  )\n}\n",
    "var TAG = /{{\\s*(.*?)\\s*}}/\n\nmodule.exports = template_string\n\nfunction template_string(template, change) {\n  if(!template.match(TAG)) {\n    return\n  }\n\n  var remaining = template\n    , parts = []\n    , hooks = []\n    , timer\n    , index\n    , next\n\n  while(remaining && (next = remaining.match(TAG))) {\n    if(index = remaining.indexOf(next[0])) {\n      parts.push(remaining.slice(0, index))\n    }\n\n    parts.push('')\n    remaining = remaining.slice(index + next[0].length)\n    hooks.push(\n        this.create_accessor(next[1], set_part.bind(this, parts.length - 1))\n    )\n  }\n\n  return update\n\n  function set_part(idx, val) {\n    parts[idx] = val\n\n    if(this.sync) {\n      return change(parts.join(''))\n    }\n\n    clearTimeout(timer)\n\n    timer = setTimeout(function() {\n      change(parts.join(''))\n    }, 0)\n  }\n\n  function update(data) {\n    hooks.forEach(function(hook) {\n      hook(data)\n    })\n  }\n}\n",
    "module.exports = create_text_node\n\nfunction create_text_node(el) {\n  var hook = this.template_string(el.textContent, update)\n\n  if(!hook) {\n    return\n  }\n\n  return {\n      el: el\n    , text: el.textContent\n    , hooks: [hook]\n  }\n\n  function update(val) {\n    el.textContent = val\n  }\n}\n"
  ],
  "sourceRoot": ""
}